typeof RGraph=="undefined"&&(RGraph={}),RGraph.Bar=function(n,t){var r,i;if(this.id=n,this.canvas=document.getElementById(n),this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,this.canvas.__object__=this,this.type="bar",this.max=0,this.stackedOrGrouped=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,RGraph.OldBrowserCompat(this.context),this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":!0,"chart.background.grid.color":"#ddd","chart.background.grid.width":1,"chart.background.grid.hsize":20,"chart.background.grid.vsize":20,"chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.ytickgap":20,"chart.smallyticks":3,"chart.largeyticks":5,"chart.numyticks":10,"chart.hmargin":5,"chart.hmargin.grouped":1,"chart.strokecolor":"rgba(0,0,0,0)","chart.axis.color":"black","chart.axis.linewidth":1,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.gutter.left":25,"chart.gutter.right":25,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.decimals":0,"chart.labels.above.size":null,"chart.labels.above.angle":null,"chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.xlabels.offset":0,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.text.angle":0,"chart.text.color":"black","chart.text.size":10,"chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.font":null,"chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.colors":["#01B4FF","#0f0","#00f","#ff0","#0ff","#0f0"],"chart.colors.sequential":!1,"chart.colors.reverse":!1,"chart.grouping":"grouped","chart.variant":"bar","chart.variant.sketch.verticals":!0,"chart.shadow":!1,"chart.shadow.color":"#999","chart.shadow.offsetx":3,"chart.shadow.offsety":3,"chart.shadow.blur":3,"chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":!0,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.background.hbars":null,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!0,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.halign":"right","chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.text.size":10,"chart.key.linewidth":1,"chart.key.colors":null,"chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.linewidth":1,"chart.annotatable":!1,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.resizable":!1,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.noaxes":!1,"chart.noxaxis":!1,"chart.noyaxis":!1,"chart.events.click":null,"chart.events.mousemove":null,"chart.numxticks":null,"chart.bevel":!1},!this.canvas){alert("[BAR] No canvas support");return}for(i=0;i<t.length;++i)typeof t[i]=="object"&&(this.stackedOrGrouped=!0);for(r=RGraph.array_linearize(t),i=0;i<r.length;++i)this["$"+i]={};this.data=t,this.coords=[],this.coords2=[],this.coordsText=[],this.data_arr=RGraph.array_linearize(this.data),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),RGraph.Register(this)},RGraph.Bar.prototype.Set=function(n,t){if(n=n.toLowerCase(),n.substr(0,6)!="chart."&&(n="chart."+n),n=="chart.labels.abovebar"&&(n="chart.labels.above"),n=="chart.strokestyle"&&(n="chart.strokecolor"),n=="chart.xaxispos"&&(t!="bottom"&&t!="center"&&t!="top"&&(alert("[BAR] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+t+" Changing it to center"),t="center"),t=="top"))for(var i=0;i<this.data.length;++i)typeof this.data[i]=="number"&&this.data[i]>0&&alert("[BAR] The data element with index "+i+" should be negative");return n.toLowerCase()=="chart.linewidth"&&t==0&&(t=.0001),this.properties[n]=t,this},RGraph.Bar.prototype.Get=function(n){return n.substr(0,6)!="chart."&&(n="chart."+n),this.properties[n]},RGraph.Bar.prototype.Draw=function(){typeof this.properties["chart.background.image"]=="string"&&RGraph.DrawBackgroundImage(this),RGraph.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=this.properties["chart.gutter.left"],this.gutterRight=this.properties["chart.gutter.right"],this.gutterTop=this.properties["chart.gutter.top"],this.gutterBottom=this.properties["chart.gutter.bottom"];for(var n=0;n<this.data.length;++n)this.data[n]==null&&(this.data[n]=0);return(this.properties["chart.variant"]=="pyramid"||this.properties["chart.variant"]=="dot")&&typeof this.properties["chart.tooltips"]=="object"&&this.properties["chart.tooltips"]&&this.properties["chart.tooltips"].length>0&&alert("[BAR] ("+this.id+") Sorry, tooltips are not supported with dot or pyramid charts"),this.coords=[],this.coords2=[],this.coordsText=[],this.max=0,this.grapharea=this.canvas.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=this.properties["chart.text.size"]/2,RGraph.background.Draw(this),this.properties["chart.variant"]=="sketch"?(this.DrawAxes(),this.Drawbars()):(this.Drawbars(),this.DrawAxes()),this.DrawLabels(),(this.properties["chart.bevel"]||this.properties["chart.bevelled"])&&this.DrawBevel(),this.properties["chart.key"]&&this.properties["chart.key"].length&&RGraph.DrawKey(this,this.properties["chart.key"],this.properties["chart.colors"]),this.properties["chart.contextmenu"]&&RGraph.ShowContext(this),this.properties["chart.labels.ingraph"]&&RGraph.DrawInGraphLabels(this),this.properties["chart.resizable"]&&RGraph.AllowResizing(this),RGraph.InstallEventListeners(this),RGraph.FireCustomEvent(this,"ondraw"),this},RGraph.Bar.prototype.DrawAxes=function(){var e,o,r,f,u;if(!this.properties["chart.noaxes"]){var i=this.properties["chart.xaxispos"],t=this.properties["chart.yaxispos"],n=this.properties["chart.variant"]=="sketch";if(this.context.beginPath(),this.context.strokeStyle=this.properties["chart.axis.color"],this.context.lineWidth=this.properties["chart.axis.linewidth"]+.001,navigator.userAgent.indexOf("Safari")==-1&&(this.context.lineCap="square"),this.properties["chart.noyaxis"]==!1&&(t=="right"?(this.context.moveTo(this.canvas.width-this.gutterRight+(n?3:0),this.gutterTop-(n?3:0)),this.context.lineTo(this.canvas.width-this.gutterRight-(n?2:0),this.canvas.height-this.gutterBottom+(n?5:0))):(this.context.moveTo(this.gutterLeft-(n?2:0),this.gutterTop-(n?5:0)),this.context.lineTo(this.gutterLeft-(n?1:0),this.canvas.height-this.gutterBottom+(n?5:0)))),this.properties["chart.noxaxis"]==!1&&(i=="center"?(this.context.moveTo(this.gutterLeft-(n?5:0),Math.round((this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+(n?2:0))),this.context.lineTo(this.canvas.width-this.gutterRight+(n?5:0),Math.round((this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-(n?2:0)))):i=="top"?(this.context.moveTo(this.gutterLeft-(n?3:0),this.gutterTop-(n?3:0)),this.context.lineTo(this.canvas.width-this.gutterRight+(n?5:0),this.gutterTop+(n?2:0))):(this.context.moveTo(this.gutterLeft-(n?5:0),this.canvas.height-this.gutterBottom-(n?2:0)),this.context.lineTo(this.canvas.width-this.gutterRight+(n?8:0),this.canvas.height-this.gutterBottom+(n?2:0)))),e=this.properties["chart.numyticks"],this.properties["chart.noyaxis"]==!1&&!n){if(o=(this.canvas.height-this.gutterTop-this.gutterBottom)/e,r=t=="left"?this.gutterLeft:this.canvas.width-this.gutterRight,this.properties["chart.numyticks"]>0)for(y=this.gutterTop;i=="center"?y<=this.canvas.height-this.gutterBottom:y<this.canvas.height-this.gutterBottom+(i=="top"?1:0);y+=o)(i!="center"||y!=this.gutterTop+this.grapharea/2)&&(i!="top"||y!=this.gutterTop)&&(this.context.moveTo(r+(t=="left"?0:0),Math.round(y)),this.context.lineTo(r+(t=="left"?-3:3),Math.round(y)));this.properties["chart.noxaxis"]&&(i=="center"?(this.context.moveTo(r+(t=="left"?-3:3),Math.round(this.canvas.height/2)),this.context.lineTo(r,Math.round(this.canvas.height/2))):i=="top"?(this.context.moveTo(r+(t=="left"?-3:3),Math.round(this.gutterTop)),this.context.lineTo(r,Math.round(this.gutterTop))):(this.context.moveTo(r+(t=="left"?-3:3),Math.round(this.canvas.height-this.gutterBottom)),this.context.lineTo(r,Math.round(this.canvas.height-this.gutterBottom))))}if(this.properties["chart.noxaxis"]==!1&&!n){for(f=typeof this.properties["chart.numxticks"]=="number"?(this.canvas.width-this.gutterLeft-this.gutterRight)/this.properties["chart.numxticks"]:(this.canvas.width-this.gutterLeft-this.gutterRight)/this.data.length,i=="bottom"?(yStart=this.canvas.height-this.gutterBottom,yEnd=this.canvas.height-this.gutterBottom+3):i=="top"?(yStart=this.gutterTop-3,yEnd=this.gutterTop):i=="center"&&(yStart=(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+3,yEnd=(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-3),yStart=yStart,yEnd=yEnd,u=this.properties["chart.noendxtick"],x=this.gutterLeft+(t=="left"?f:0);x<this.canvas.width-this.gutterRight+(t=="left"?5:0);x+=f)t=="left"&&!u&&x>this.gutterLeft?(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd)):t=="left"&&u&&x>this.gutterLeft&&x<this.canvas.width-this.gutterRight?(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd)):t=="right"&&x<this.canvas.width-this.gutterRight&&!u?(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd)):t=="right"&&x<this.canvas.width-this.gutterRight&&x>this.gutterLeft&&u&&(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd));(this.properties["chart.noyaxis"]||this.properties["chart.numxticks"]==null)&&typeof this.properties["chart.numxticks"]=="number"&&this.properties["chart.numxticks"]>0&&(this.context.moveTo(Math.round(this.gutterLeft),yStart),this.context.lineTo(Math.round(this.gutterLeft),yEnd))}this.properties["chart.noyaxis"]&&this.properties["chart.noxaxis"]==!1&&this.properties["chart.numxticks"]==null&&(i=="center"?(this.context.moveTo(Math.round(this.gutterLeft),this.canvas.height/2-3),this.context.lineTo(Math.round(this.gutterLeft),this.canvas.height/2+3)):(this.context.moveTo(Math.round(this.gutterLeft),this.canvas.height-this.gutterBottom),this.context.lineTo(Math.round(this.gutterLeft),this.canvas.height-this.gutterBottom+3))),this.context.stroke()}},RGraph.Bar.prototype.Drawbars=function(){var et=this.canvas,n=this.context,t=this.properties,ct,y,e,f,s,bt,tt,ht,pt,kt,o,l,h,u,rt,it,b,d,c;n.lineWidth=t["chart.linewidth"],n.strokeStyle=t["chart.strokecolor"],n.fillStyle=t["chart.colors"][0];var dt=t["chart.scale.decimals"];if(t["chart.ymax"])this.scale2=RGraph.getScale2(this,{max:t["chart.ymax"],strict:!0,min:t["chart.ymin"],"scale.thousand":t["chart.scale.thousand"],"scale.point":t["chart.scale.point"],"scale.decimals":t["chart.scale.decimals"],"ylabels.count":t["chart.ylabels.count"],"scale.round":t["chart.scale.round"],"units.pre":t["chart.units.pre"],"units.post":t["chart.units.post"]});else{for(i=0;i<this.data.length;++i)ct=typeof this.data[i]=="object"?t["chart.grouping"]=="grouped"?Number(RGraph.array_max(this.data[i],!0)):Number(RGraph.array_sum(this.data[i])):Number(this.data[i]),this.max=Math.max(Math.abs(this.max),Math.abs(ct));this.scale2=RGraph.getScale2(this,{max:this.max,min:t["chart.ymin"],"scale.thousand":t["chart.scale.thousand"],"scale.point":t["chart.scale.point"],"scale.decimals":t["chart.scale.decimals"],"ylabels.count":t["chart.ylabels.count"],"scale.round":t["chart.scale.round"],"units.pre":t["chart.units.pre"],"units.post":t["chart.units.post"]})}t["chart.adjustable"]&&!t["chart.ymax"]&&this.Set("chart.ymax",this.scale2.max),t["chart.background.hbars"]&&t["chart.background.hbars"].length>0&&RGraph.DrawBars(this),y=t["chart.variant"],y=="3d"&&RGraph.Draw3DAxes(this);var nt=t["chart.xaxispos"],a=(this.canvas.width-this.gutterLeft-this.gutterRight)/this.data.length,gt=u,r=t["chart.hmargin"],w=t["chart.shadow"],lt=t["chart.shadow.color"],at=t["chart.shadow.blur"],vt=t["chart.shadow.offsetx"],yt=t["chart.shadow.offsety"],st=t["chart.strokecolor"],p=t["chart.colors"],ot=0;for(i=0;i<this.data.length;++i){if(u=(RGraph.array_sum(this.data[i])<0?RGraph.array_sum(this.data[i])+this.scale2.min:RGraph.array_sum(this.data[i])-this.scale2.min)/(this.scale2.max-this.scale2.min)*(et.height-this.gutterTop-this.gutterBottom),nt=="center"&&(u/=2),e=i*a+this.gutterLeft,f=nt=="center"?(et.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-u:et.height-u-this.gutterBottom,nt=="top"&&(f=this.gutterTop+Math.abs(u)),u<0&&(f+=u,u=Math.abs(u)),w&&(n.shadowColor=lt,n.shadowBlur=at,n.shadowOffsetX=vt,n.shadowOffsetY=yt),this.context.beginPath(),typeof this.data[i]=="number"){if(s=a-2*r,s<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),n.strokeStyle=st,n.fillStyle=p[0],t["chart.colors.sequential"]&&(n.fillStyle=p[i]),y=="sketch"){if(this.context.lineCap="round",bt=3,n.beginPath(),n.strokeStyle=p[0],t["chart.colors.sequential"]&&(n.strokeStyle=p[i]),n.moveTo(e+r+2,f+u-2),n.lineTo(e+r-1,f-4),n.moveTo(e+r-3,f+-2+(this.data[i]<0?u:0)),n.bezierCurveTo(e+(r+a)*.33,f+15+(this.data[i]<0?u-10:0),e+(r+a)*.66,f+5+(this.data[i]<0?u-10:0),e+r+a+-1,f+0+(this.data[i]<0?u:0)),n.moveTo(e+r+a-5,f-5),n.lineTo(e+r+a-3,f+u-3),t["chart.variant.sketch.verticals"])for(tt=.2;tt<=.8;tt+=.2)n.moveTo(e+r+a+(tt>.4?-1:3)-tt*a,f-1),n.lineTo(e+r+a-(tt>.4?1:-1)-tt*a,f+u+(tt==.2?1:-2));this.context.stroke()}else if(y=="bar"||y=="3d"||y=="glass"||y=="bevel"){if(RGraph.isOld()&&w&&this.DrawIEShadow([e+r,f,s,u]),y=="glass"?(RGraph.filledCurvyRect(this.context,e+r,f,s,u,3,this.data[i]>0,this.data[i]>0,this.data[i]<0,this.data[i]<0),RGraph.strokedCurvyRect(this.context,e+r,f,s,u,3,this.data[i]>0,this.data[i]>0,this.data[i]<0,this.data[i]<0)):(this.context.strokeRect(e+r,f,s,u),this.context.fillRect(e+r,f,s,u)),y=="3d"?(it=n.strokeStyle,rt=n.fillStyle,n.beginPath(),n.moveTo(e+r,f),n.lineTo(e+r+10,f-5),n.lineTo(e+r+10+s,f-5),n.lineTo(e+r+s,f),n.closePath(),n.stroke(),n.fill(),n.beginPath(),n.moveTo(e+r+s,f),n.lineTo(e+r+s+10,f-5),n.lineTo(e+r+s+10,f+u-5),n.lineTo(e+r+s,f+u),n.closePath(),n.stroke(),n.fill(),n.beginPath(),n.fillStyle="rgba(255,255,255,0.3)",n.moveTo(e+r,f),n.lineTo(e+r+10,f-5),n.lineTo(e+r+10+s,f-5),n.lineTo(e+r+s,f),n.lineTo(e+r,f),n.closePath(),n.stroke(),n.fill(),n.beginPath(),n.fillStyle="rgba(0,0,0,0.4)",n.moveTo(e+r+s,f),n.lineTo(e+r+s+10,f-5),n.lineTo(e+r+s+10,f-5+u),n.lineTo(e+r+s,f+u),n.lineTo(e+r+s,f),n.closePath(),n.stroke(),n.fill(),n.strokeStyle=it,n.fillStyle=rt):y=="glass"&&(ht=n.createLinearGradient(e+r,f,e+r+s/2,f),ht.addColorStop(0,"rgba(255,255,255,0.9)"),ht.addColorStop(1,"rgba(255,255,255,0.5)"),n.beginPath(),n.fillStyle=ht,n.fillRect(e+r+2,f+(this.data[i]>0?2:0),s/2-2,u-2),n.fill()),t["chart.labels.above"]){if(w&&RGraph.NoShadow(this),b=f-3,pt=e+r+s/2,this.data[i]<0&&(b+=u+6+t["chart.text.size"]),t["chart.xaxispos"]=="top"&&(b=this.gutterTop+u+6+(typeof t["chart.labels.above.size"]=="number"?t["chart.labels.above.size"]:t["chart.text.size"]-4)),t["chart.variant"]=="3d"&&(b-=3,pt+=5),this.properties["chart.labels.above.angle"])var ut=-45,ft="left",d="center";else var ut=0,ft="center",d="bottom";n.fillStyle=t["chart.text.color"],RGraph.Text2(this,{font:t["chart.text.font"],size:typeof t["chart.labels.above.size"]=="number"?t["chart.labels.above.size"]:t["chart.text.size"]-3,x:pt,y:b,text:RGraph.number_format(this,Number(this.data[i]).toFixed(t["chart.labels.above.decimals"]),t["chart.units.pre"],t["chart.units.post"]),halign:ft,marker:!1,valign:d,angle:ut,tag:"labels.above"})}}else y=="dot"?(n.beginPath(),n.moveTo(e+a/2,f),n.lineTo(e+a/2,f+u),n.stroke(),n.beginPath(),n.fillStyle=this.properties["chart.colors"][i],n.arc(e+a/2,f+(this.data[i]>0?0:u),2,0,6.28,0),n.fillStyle=t["chart.colors"][0],t["chart.colors.sequential"]&&(n.fillStyle=p[i]),n.stroke(),n.fill()):alert("[BAR] Warning! Unknown chart.variant: "+y);this.coords.push([e+r,f,a-2*r,u]),typeof this.coords2[i]=="undefined"&&(this.coords2[i]=[]),this.coords2[i].push([e+r,f,a-2*r,u])}else if(typeof this.data[i]=="object"&&t["chart.grouping"]=="stacked"){this.scale2.min&&alert("[ERROR] Stacked Bar charts with a Y min are not supported");var s=a-2*r,l=[],h=0,wt=this.data[i];for(s<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),c=0;c<wt.length;++c){if(nt=="center"){alert("[BAR] It's pointless having the X axis position at the center on a stacked bar chart.");return}if(this.data[i][c]<0){alert("[BAR] Negative values are not permitted with a stacked bar chart. Try a grouped one instead.");return}n.strokeStyle=st,n.fillStyle=p[c],t["chart.colors.reverse"]&&(n.fillStyle=p[this.data[i].length-c-1]),t["chart.colors.sequential"]&&p[ot]?n.fillStyle=p[ot++]:t["chart.colors.sequential"]&&(n.fillStyle=p[ot-1]),u=wt[c]/this.scale2.max*(et.height-this.gutterTop-this.gutterBottom),nt=="center"&&(u/=2),kt=RGraph.array_sum(wt)/this.scale2.max*(et.height-r-this.gutterTop-this.gutterBottom),this.coords.push([e+r,f,a-2*r,u]),typeof this.coords2[i]=="undefined"&&(this.coords2[i]=[]),this.coords2[i].push([e+r,f,a-2*r,u]),RGraph.isOld()&&w&&this.DrawIEShadow([e+r,f,a-2*r,u+1]),n.strokeRect(e+r,f,a-2*r,u),n.fillRect(e+r,f,a-2*r,u),c==0&&(h=f,o=e),w&&l.push([e+r,f,a-2*r,u,n.fillStyle]),y=="3d"&&(rt=n.fillStyle,it=n.strokeStyle,c==0&&(n.beginPath(),n.moveTo(o+r,f),n.lineTo(o+10+r,f-5),n.lineTo(o+10+s+r,f-5),n.lineTo(o+s+r,f),n.closePath(),n.fill(),n.stroke()),n.beginPath(),n.moveTo(o+s+r,f),n.lineTo(o+s+r+10,f-5),n.lineTo(o+s+r+10,f-5+u),n.lineTo(o+s+r,f+u),n.closePath(),n.fill(),n.stroke(),c==0&&(n.fillStyle="rgba(255,255,255,0.3)",n.beginPath(),n.moveTo(o+r,f),n.lineTo(o+10+r,f-5),n.lineTo(o+10+s+r,f-5),n.lineTo(o+s+r,f),n.closePath(),n.fill(),n.stroke()),n.fillStyle="rgba(0,0,0,0.4)",n.beginPath(),n.moveTo(o+s+r,f),n.lineTo(o+s+r+10,f-5),n.lineTo(o+s+r+10,f-5+u),n.lineTo(o+s+r,f+u),n.closePath(),n.fill(),n.stroke(),n.strokeStyle=it,n.fillStyle=rt),f+=u}if(this.Get("chart.labels.above")){if(RGraph.NoShadow(this),n.fillStyle=t["chart.text.color"],this.properties["chart.labels.above.angle"])var ut=-45,ft="left",d="center";else var ut=0,ft="center",d="bottom";RGraph.Text2(this,{font:t["chart.text.font"],size:typeof t["chart.labels.above.size"]=="number"?t["chart.labels.above.size"]:t["chart.text.size"]-3,x:o+s/2+t["chart.hmargin"],y:h-(t["chart.shadow"]&&this.properties["chart.shadow.offsety"]<0?7:4)-(t["chart.variant"]=="3d"?5:0),text:String(t["chart.units.pre"]+RGraph.array_sum(this.data[i]).toFixed(t["chart.labels.above.decimals"])+t["chart.units.post"]),angle:ut,valign:d,halign:ft,tag:"labels.above"}),w&&(n.shadowColor=lt,n.shadowBlur=at,n.shadowOffsetX=vt,n.shadowOffsetY=yt)}if(w){for(RGraph.NoShadow(this),k=0;k<l.length;++k)n.strokeStyle=st,n.fillStyle=l[k][4],n.strokeRect(l[k][0],l[k][1],l[k][2],l[k][3]),n.fillRect(l[k][0],l[k][1],l[k][2],l[k][3]),n.stroke(),n.fill();l=[]}}else if(typeof this.data[i]=="object"&&this.properties["chart.grouping"]=="grouped"){for(l=[],n.lineWidth=t["chart.linewidth"],c=0;c<this.data[i].length;++c){n.strokeStyle=st,n.fillStyle=p[c],t["chart.colors.sequential"]&&p[ot]?n.fillStyle=p[ot++]:t["chart.colors.sequential"]&&(n.fillStyle=p[ot-1]);var v=(a-2*r)/this.data[i].length,u=(this.data[i][c]+(this.data[i][c]<0?this.scale2.min:-1*this.scale2.min))/(this.scale2.max-this.scale2.min)*(et.height-this.gutterTop-this.gutterBottom),g=this.properties["chart.hmargin.grouped"],o=e+r+c*v;if(v<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),nt=="center"&&(u/=2),nt=="top"?(h=this.gutterTop,u=Math.abs(u)):nt=="center"?h=this.gutterTop+this.grapharea/2-u:(h=this.canvas.height-this.gutterBottom-u,u=Math.abs(u)),RGraph.isOld()&&w&&this.DrawIEShadow([o,h,v,u]),n.strokeRect(o+g,h,v-2*g,u),n.fillRect(o+g,h,v-2*g,u),f+=u,y=="3d"&&(rt=n.fillStyle,it=n.strokeStyle,n.beginPath(),n.moveTo(o,h),n.lineTo(o+10,h-5),n.lineTo(o+10+v,h-5),n.lineTo(o+v,h),n.closePath(),n.fill(),n.stroke(),n.beginPath(),n.moveTo(o+v,h),n.lineTo(o+v+10,h-5),n.lineTo(o+v+10,h-5+u),n.lineTo(o+v,h+u),n.closePath(),n.fill(),n.stroke(),n.fillStyle="rgba(255,255,255,0.3)",n.beginPath(),n.moveTo(o,h),n.lineTo(o+10,h-5),n.lineTo(o+10+v,h-5),n.lineTo(o+v,h),n.closePath(),n.fill(),n.stroke(),n.fillStyle="rgba(0,0,0,0.4)",n.beginPath(),n.moveTo(o+v,h),n.lineTo(o+v+10,h-5),n.lineTo(o+v+10,h-5+u),n.lineTo(o+v,h+u),n.closePath(),n.fill(),n.stroke(),n.strokeStyle=it,n.fillStyle=rt),u<0&&(u=Math.abs(u),h=h-u),this.coords.push([o+g,h,v-2*g,u]),typeof this.coords2[i]=="undefined"&&(this.coords2[i]=[]),this.coords2[i].push([e+r+g,f,a-2*r-2*g,u]),t["chart.shadow"]&&l.push([o+g,h,v-2*g,u,n.fillStyle]),t["chart.labels.above"]){if(n.strokeStyle="rgba(0,0,0,0)",w&&RGraph.NoShadow(this),b=f-3,this.properties["chart.labels.above.angle"])var ut=-45,ft="left",d="center";else{var ut=0,ft="center",d="bottom";this.data[i][c]<0||this.properties["chart.xaxispos"]=="top"?(b=h+u+6,d="top"):b=h}n.fillStyle=t["chart.text.color"],RGraph.Text2(this,{font:t["chart.text.font"],size:typeof t["chart.labels.above.size"]=="number"?t["chart.labels.above.size"]:t["chart.text.size"]-3,x:o+v/2,y:b-3,text:RGraph.number_format(this,this.data[i][c].toFixed(t["chart.labels.above.decimals"])),halign:ft,valign:d,angle:ut,tag:"labels.above"}),w&&(n.shadowColor=lt,n.shadowBlur=at,n.shadowOffsetX=vt,n.shadowOffsetY=yt)}}if(l.length){for(RGraph.NoShadow(this),n.lineWidth=t["chart.linewidth"],n.beginPath(),c=0;c<l.length;++c)n.fillStyle=l[c][4],n.strokeStyle=t["chart.strokecolor"],n.fillRect(l[c][0],l[c][1],l[c][2],l[c][3]),n.strokeRect(l[c][0],l[c][1],l[c][2],l[c][3]);n.fill(),n.stroke(),l=[]}}n.closePath()}RGraph.NoShadow(this)},RGraph.Bar.prototype.DrawLabels=function(){var l=this.context,y=this.properties["chart.text.angle"],a=this.properties["chart.text.size"],t=this.properties["chart.labels"],f,v,o,n;if(this.properties["chart.ylabels"]&&(this.properties["chart.xaxispos"]=="top"&&this.Drawlabels_top(),this.properties["chart.xaxispos"]=="center"&&this.Drawlabels_center(),this.properties["chart.xaxispos"]=="bottom"&&this.Drawlabels_bottom()),typeof t=="object"&&t){if(f=Number(this.properties["chart.xlabels.offset"]),this.properties["chart.text.angle"]!=0)var r="center",u="right",e=0-this.properties["chart.text.angle"];else var r="top",u="center",e=0;for(l.fillStyle=this.properties["chart.text.color"],v=(this.canvas.width-this.gutterRight-this.gutterLeft)/t.length,xTickGap=(this.canvas.width-this.gutterRight-this.gutterLeft)/t.length,n=0,o=this.properties["chart.text.font"],x=this.gutterLeft+xTickGap/2;x<=this.canvas.width-this.gutterRight;x+=xTickGap)RGraph.Text2(this,{font:o,size:a,x:x,y:this.properties["chart.xaxispos"]=="top"?this.gutterTop-f-5:this.canvas.height-this.gutterBottom+f+3,text:String(t[n++]),valign:this.properties["chart.xaxispos"]=="top"?"bottom":r,halign:u,tag:"label",marker:!1,angle:e,tag:"labels"})}if(this.properties["chart.labels.above.specific"])for(t=this.properties["chart.labels.above.specific"],n=0;n<this.coords.length;++n){var s=this.properties["chart.xaxispos"],i=this.coords[n],h=this.data_arr[n],r=h>=0&&s!="top"?"bottom":"top",u="center",c=t[n];c&&c.toString().length>0&&RGraph.Text2(this,{font:this.properties["chart.text.font"],size:this.properties["chart.labels.above.size"]?this.properties["chart.labels.above.size"]:this.properties["chart.text.size"],x:i[0]+i[2]/2,y:h>=0&&s!="top"?i[1]-5:i[1]+i[3]+3,text:String(t[n]),valign:r,halign:u,tag:"labels.above"})}},RGraph.Bar.prototype.Drawlabels_top=function(){var o=this.canvas,r=this.context,n=this.properties,u,f,c,l,i,t;if(r.beginPath(),r.fillStyle=n["chart.text.color"],r.strokeStyle="black",n["chart.xaxispos"]=="top"){var y=r,s=n["chart.text.size"],a=n["chart.units.pre"],v=n["chart.units.post"],e=n["chart.yaxispos"]=="left"?"right":"left",h=n["chart.text.font"],p=n["chart.ylabels.count"],w=n["chart.ymin"];if(n["chart.ylabels.inside"]==!0)var u=n["chart.yaxispos"]=="left"?this.gutterLeft+5:o.width-this.gutterRight-5,e=n["chart.yaxispos"]=="left"?"left":"right",f=!0;else u=n["chart.yaxispos"]=="left"?this.gutterLeft-5:o.width-this.gutterRight+5,f=!1;if(typeof n["chart.ylabels.specific"]=="object"&&n["chart.ylabels.specific"]){for(i=RGraph.array_reverse(n["chart.ylabels.specific"]),c=o.height-this.gutterTop-this.gutterBottom,t=0;t<i.length;++t)l=this.gutterTop+c*(t/i.length)+c/i.length,RGraph.Text2(this,{font:h,size:s,x:u,y:l,text:String(i[t]),valign:"center",halign:e,bordered:f,tag:"scale"});return}for(i=this.scale2.labels,t=0;t<i.length;++t)RGraph.Text2(this,{font:h,size:s,x:u,y:this.gutterTop+this.grapharea/i.length*(t+1),text:"-"+i[t],valign:"center",halign:e,bordered:f,tag:"scale"});(n["chart.ymin"]!=0||n["chart.noxaxis"])&&RGraph.Text2(this,{font:h,size:s,x:u,y:this.gutterTop,text:(this.scale2.min!=0?"-":"")+RGraph.number_format(this,this.scale2.min.toFixed(n["chart.scale.decimals"]),a,v),valign:"center",halign:e,bordered:f,tag:"scale"})}r.fill()},RGraph.Bar.prototype.Drawlabels_center=function(){var a=this.canvas,c=this.context,t=this.properties,o=t["chart.text.font"],v=t["chart.ylabels.count"],r,l,n,i,h;if(c.fillStyle=t["chart.text.color"],t["chart.xaxispos"]=="center"){var s=t["chart.text.size"],y=t["chart.units.pre"],p=t["chart.units.post"],w=c,u="",f=0,e=!1,b=t["chart.ymin"];if(c.fillStyle=t["chart.text.color"],c.strokeStyle="black",t["chart.ylabels.inside"]==!0)var f=t["chart.yaxispos"]=="left"?this.gutterLeft+5:a.width-this.gutterRight-5,u=t["chart.yaxispos"]=="left"?"left":"right",e=!0;else var f=t["chart.yaxispos"]=="left"?this.gutterLeft-5:a.width-this.gutterRight+5,u=t["chart.yaxispos"]=="left"?"right":"left",e=!1;if(typeof t["chart.ylabels.specific"]=="object"&&t["chart.ylabels.specific"]){for(r=t["chart.ylabels.specific"],l=a.height-this.gutterTop-this.gutterBottom,n=0;n<r.length;++n)i=this.gutterTop+l/2/(r.length-1)*n,RGraph.Text2(this,{font:o,size:s,x:f,y:i,text:String(r[n]),valign:"center",halign:u,bordered:e,tag:"scale"});for(n=r.length-1;n>=1;--n)i=this.gutterTop+l*(n/((r.length-1)*2))+l/2,RGraph.Text2(this,{font:o,size:s,x:f,y:i,text:String(r[r.length-n-1]),valign:"center",halign:u,bordered:e,tag:"scale"});return}for(n=0;n<this.scale2.labels.length;++n)i=this.gutterTop+this.halfgrapharea-this.halfgrapharea/v*(n+1),h=this.scale2.labels[n],RGraph.Text2(this,{font:o,size:s,x:f,y:i,text:h,valign:"center",halign:u,bordered:e,tag:"scale"});for(n=this.scale2.labels.length-1;n>=0;--n)i=this.gutterTop+this.halfgrapharea/v*(n+1)+this.halfgrapharea,h=this.scale2.labels[n],RGraph.Text2(this,{font:o,size:s,x:f,y:i,text:"-"+h,valign:"center",halign:u,bordered:e,tag:"scale"});this.scale2.min!=0&&RGraph.Text2(this,{font:o,size:s,x:f,y:this.gutterTop+this.halfgrapharea,text:RGraph.number_format(this,this.scale2.min.toFixed(this.properties["chart.scale.decimals"]),y,p),valign:"center",valign:"center",halign:u,bordered:e,tag:"scale"})}},RGraph.Bar.prototype.Drawlabels_bottom=function(){var u=this.context,o=this.canvas,n=this.properties,s=n["chart.text.size"],y=n["chart.units.pre"],p=n["chart.units.post"],w=this.context,f=n["chart.yaxispos"]=="left"?"right":"left",h=n["chart.text.font"],c=n["chart.ylabels.count"],b=n["chart.ymin"],i,r,e,l,a,t,v;if(u.beginPath(),u.fillStyle=this.properties["chart.text.color"],u.strokeStyle="black",n["chart.ylabels.inside"]==!0)var i=n["chart.yaxispos"]=="left"?this.gutterLeft+5:o.width-this.gutterRight-5,f=n["chart.yaxispos"]=="left"?"left":"right",r=!0;else i=n["chart.yaxispos"]=="left"?this.gutterLeft-5:o.width-this.gutterRight+5,r=!1;if(n["chart.ylabels.specific"]&&typeof n["chart.ylabels.specific"]=="object"){for(e=n["chart.ylabels.specific"],l=o.height-this.gutterTop-this.gutterBottom,t=0;t<e.length;++t)a=this.gutterTop+l*(t/(e.length-1)),RGraph.Text2(this,{font:h,size:s,x:i,y:a,text:e[t],valign:"center",halign:f,bordered:r,tag:"scale"});return}var k=this.gutterTop,d=this.halfTextHeight,g=this.scale;for(t=0;t<c;++t)v=this.scale2.labels[t],RGraph.Text2(this,{font:h,size:s,x:i,y:this.gutterTop+this.grapharea-this.grapharea/c*(t+1),text:v,valign:"center",halign:f,bordered:r,tag:"scale"});(this.properties["chart.ymin"]!=0||this.properties["chart.noxaxis"])&&RGraph.Text2(this,{font:h,size:s,x:i,y:this.canvas.height-this.gutterBottom,text:RGraph.number_format(this,this.scale2.min.toFixed(this.properties["chart.scale.decimals"]),y,p),valign:"center",halign:f,bordered:r,tag:"scale"}),u.fill()},RGraph.Bar.prototype.DrawIEShadow=function(n){var t=this.context.fillStyle,i=this.properties["chart.shadow.offsetx"],r=this.properties["chart.shadow.offsety"];this.context.lineWidth=this.properties["chart.linewidth"],this.context.fillStyle=this.properties["chart.shadow.color"],this.context.beginPath(),this.context.fillRect(n[0]+i,n[1]+r,n[2],n[3]),this.context.fill(),this.context.fillStyle=t},RGraph.Bar.prototype.getShape=RGraph.Bar.prototype.getBar=function(n){for(var t=arguments[1]?arguments[1]:this,c=RGraph.getMouseXY(n),l=c[0],a=c[1],y=t.canvas,p=t.context,u=t.coords,v,r,f,i=0;i<u.length;i++){var e=u[i][0],o=u[i][1],s=u[i][2],h=u[i][3];if(l>=e&&l<=e+s&&a>=o&&a<=o+h){for(t.properties["chart.tooltips"]&&(v=RGraph.parseTooltipText?RGraph.parseTooltipText(t.properties["chart.tooltips"],i):t.properties["chart.tooltips"][i]),r=0,f=i;f>=(typeof t.data[r]=="object"?t.data[r].length:1);)f-=typeof t.data[r]=="number"?1:t.data[r].length,r++;return typeof t.data[r]=="number"&&(f=null),{0:t,1:e,2:o,3:s,4:h,5:i,object:t,x:e,y:o,width:s,height:h,index:i,tooltip:v,index_adjusted:f,dataset:r}}}return null},RGraph.Bar.prototype.getShapeByX=function(n){for(var c=n.target,f=RGraph.getMouseXY(n),i=arguments[1]?arguments[1]:this,h,t=0;t<i.coords.length;t++){var e=f[0],l=f[1],r=i.coords[t][0],o=i.coords[t][1],u=i.coords[t][2],s=i.coords[t][3];if(e>=r&&e<=r+u)return this.properties["chart.tooltips"]&&(h=RGraph.parseTooltipText?RGraph.parseTooltipText(this.properties["chart.tooltips"],t):this.properties["chart.tooltips"][t]),{0:i,1:r,2:o,3:u,4:s,5:t,object:i,x:r,y:o,width:u,height:s,index:t,tooltip:h}}return null},RGraph.Bar.prototype.getValue=function(n){var r,i,t;if(n.length==2)r=n[0],i=n[1];else var u=RGraph.getMouseXY(n),r=u[0],i=u[1];return i<this.properties["chart.gutter.top"]||i>this.canvas.height-this.properties["chart.gutter.bottom"]||r<this.properties["chart.gutter.left"]||r>this.canvas.width-this.properties["chart.gutter.right"]?null:(this.properties["chart.xaxispos"]=="center"?(t=(this.grapharea/2-(i-this.properties["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min),t*=2,t>=0?t+=this.scale2.min:t-=this.scale2.min):this.properties["chart.xaxispos"]=="top"?(t=(this.grapharea-(i-this.properties["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min),t=this.scale2.max-t,t=Math.abs(t)*-1):t=(this.grapharea-(i-this.properties["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min)+this.scale2.min,t)},RGraph.Bar.prototype.getYCoord=function(n){if(n>this.scale2.max)return null;var t,i=this.properties["chart.xaxispos"];return i=="top"?(n<0&&(n=Math.abs(n)),t=(n-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,t=t+this.gutterTop):i=="center"?(t=(n-this.scale2.min)/(this.scale2.max-this.scale2.min)*(this.grapharea/2),t=this.grapharea/2-t+this.gutterTop):(n<this.scale2.min&&(n=this.scale2.min),t=(n-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,t=this.canvas.height-this.gutterBottom-t),t},RGraph.Bar.prototype.Highlight=function(n){RGraph.Highlight.Rect(this,n)},RGraph.Bar.prototype.getObjectByXY=function(n){var t=RGraph.getMouseXY(n);if(t[0]>=this.properties["chart.gutter.left"]&&t[0]<=this.canvas.width-this.properties["chart.gutter.right"]&&t[1]>=this.properties["chart.gutter.top"]&&t[1]<=this.canvas.height-this.properties["chart.gutter.bottom"])return this},RGraph.Bar.prototype.Adjusting_mousemove=function(n){var i,t,r;RGraph.Registry.Get("chart.adjusting")&&RGraph.Registry.Get("chart.adjusting").uid==this.uid&&(i=Number(this.getValue(n)),t=this.getShapeByX(n),t&&(RGraph.Registry.Set("chart.adjusting.shape",t),this.stackedOrGrouped&&this.properties["chart.grouping"]=="grouped"?(r=RGraph.sequentialIndexToGrouped(t.index,this.data),this.data[r[0]][r[1]]=Number(i)):this.data[t.index]=Number(i),RGraph.RedrawCanvas(n.target),RGraph.FireCustomEvent(this,"onadjust")))},RGraph.CombinedChart=function(){var t,n,i;for(this.objects=[],t=arguments,RGraph.is_array(arguments[0])&&(t=arguments[0]),n=0;n<t.length;++n)this.objects[n]=t[n],this.objects[n].Set("chart.gutter.left",this.objects[0].Get("chart.gutter.left")),this.objects[n].Set("chart.gutter.right",this.objects[0].Get("chart.gutter.right")),this.objects[n].Set("chart.gutter.top",this.objects[0].Get("chart.gutter.top")),this.objects[n].Set("chart.gutter.bottom",this.objects[0].Get("chart.gutter.bottom")),this.objects[n].type=="line"&&(this.objects[n].Set("chart.hmargin",(this.objects[0].canvas.width-this.objects[0].Get("chart.gutter.right")-this.objects[0].Get("chart.gutter.left"))/this.objects[0].data.length/2),this.objects[n].Set("chart.noaxes",!0),this.objects[n].Set("chart.background.grid",!1),this.objects[n].Set("chart.ylabels",!1)),this.objects[n].Get("chart.resizable")&&(i=this.objects[n]);if(i){function r(n){var t=n.Get("chart.gutter.left"),i=n.Get("chart.gutter.right");n.Set("chart.hmargin",(n.canvas.width-t-i)/(n.original_data[0].length*2))}RGraph.AddCustomEventListener(i,"onresizebeforedraw",r)}},RGraph.CombinedChart.prototype.Add=function(n){this.objects.push(n)},RGraph.CombinedChart.prototype.Draw=function(){for(var n=0;n<this.objects.length;++n)typeof arguments[n]=="function"?arguments[n](this.objects[n]):this.objects[n].Draw()},RGraph.Bar.prototype.positionTooltip=function(n,t,i,r){var o=n.coords[r.__index__][0],h=n.coords[r.__index__][1],s=n.coords[r.__index__][2],l=n.coords[r.__index__][3],e=RGraph.getCanvasXY(n.canvas),v=n.Get("chart.gutter.left"),y=n.Get("chart.gutter.top"),f=r.offsetWidth,a=r.offsetHeight,c=n.data_arr[r.__index__],u;r.style.left=0,r.style.top=e[1]+h-a-7+"px",c<0&&(r.style.top=e[1]+h+l+7+"px"),r.style.overflow="",u=new Image,u.style.position="absolute",u.id="__rgraph_tooltip_pointer__",c>=0?(u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",u.style.top=r.offsetHeight-2+"px"):(u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAMAAACkeOZkAAAAK3RFWHRDcmVhdGlvbiBUaW1lAFNhdCA2IE9jdCAyMDEyIDEyOjQ5OjMyIC0wMDAw2S1RlgAAAAd0SU1FB9wKBgszM4Ed2k4AAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAEZ0FNQQAAsY8L/GEFAAAACVBMVEX/AAC9vb3//+92Pom0AAAAAXRSTlMAQObYZgAAAB1JREFUeNpjYAABRgY4YGRiRDCZYBwQE8qBMEEcAANCACqByy1sAAAAAElFTkSuQmCC",u.style.top="-5px"),r.appendChild(u),e[0]+o+s/2-f/2<10?(r.style.left=e[0]+o-f*.1+s/2+"px",u.style.left=f*.1-8.5+"px"):e[0]+o+f/2>document.body.offsetWidth?(r.style.left=e[0]+o-f*.9+s/2+"px",u.style.left=f*.9-8.5+"px"):(r.style.left=e[0]+o+s/2-f*.5+"px",u.style.left=f*.5-8.5+"px")},RGraph.Bar.prototype.parseColors=function(){var n=this.properties,i=n["chart.colors"],t;if(i)for(t=0;t<i.length;++t)i[t]=this.parseSingleColorForGradient(i[t]);if(i=n["chart.key.colors"],i)for(t=0;t<i.length;++t)i[t]=this.parseSingleColorForGradient(i[t]);n["chart.crosshairs.color"]=this.parseSingleColorForGradient(n["chart.crosshairs.color"]),n["chart.highlight.stroke"]=this.parseSingleColorForGradient(n["chart.highlight.stroke"]),n["chart.highlight.fill"]=this.parseSingleColorForGradient(n["chart.highlight.fill"]),n["chart.text.color"]=this.parseSingleColorForGradient(n["chart.text.color"]),n["chart.background.barcolor1"]=this.parseSingleColorForGradient(n["chart.background.barcolor1"]),n["chart.background.barcolor2"]=this.parseSingleColorForGradient(n["chart.background.barcolor2"]),n["chart.background.grid.color"]=this.parseSingleColorForGradient(n["chart.background.grid.color"]),n["chart.strokecolor"]=this.parseSingleColorForGradient(n["chart.strokecolor"]),n["chart.axis.color"]=this.parseSingleColorForGradient(n["chart.axis.color"])},RGraph.Bar.prototype.parseSingleColorForGradient=function(n){var t;if(!n||typeof n!="string")return n;if(n.match(/^gradient\((.*)\)$/i)){var i=RegExp.$1.split(":"),r=this.context.createLinearGradient(0,this.canvas.height-this.properties["chart.gutter.bottom"],0,this.properties["chart.gutter.top"]),u=1/(i.length-1);for(r.addColorStop(0,RGraph.trim(i[0])),t=1;t<i.length;++t)r.addColorStop(t*u,RGraph.trim(i[t]))}return r?r:n},RGraph.Bar.prototype.DrawBevel=function(){var f=this.coords,u=this.coords2,n=this.context,s,i,t;if(this.properties["chart.grouping"]=="stacked"){for(t=0;t<u.length;++t)if(u[t]&&u[t][0]&&u[t][0][0]){var e=u[t][0][0],r=u[t][0][1],o=u[t][0][2],h=[];for(s=0;s<u[t].length;++s)h.push(u[t][s][3]);i=RGraph.array_sum(h),n.save(),n.strokeStyle="black",n.beginPath(),n.rect(e,r,o,i),n.clip(),n.shadowColor="black",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=20,n.beginPath(),n.rect(e-3,r-3,o+6,i+100),n.lineWidth=5,n.stroke(),n.restore()}}else for(t=0;t<f.length;++t)if(f[t]){var e=f[t][0],r=f[t][1],o=f[t][2],i=f[t][3],c=this.properties["chart.xaxispos"],l=(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop;n.save(),n.strokeStyle="black",n.beginPath(),n.rect(e,r,o,i),n.clip(),n.shadowColor="black",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=20,c=="top"||c=="center"&&r+i>l?(r=r-100,i=i+100):(r=r,i=i+100),n.beginPath(),n.rect(e-3,r-3,o+6,i+6),n.lineWidth=5,n.stroke(),n.restore()}}