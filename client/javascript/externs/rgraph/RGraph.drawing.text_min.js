typeof RGraph=="undefined"&&(RGraph={}),typeof RGraph.Drawing=="undefined"&&(RGraph.Drawing={}),RGraph.Drawing.Text=function(n,t,i,r){if(this.id=n,this.canvas=document.getElementById(n),this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,this.colorsParsed=!1,this.canvas.__object__=this,this.x=t,this.y=i,this.text=r,this.coords=[],this.coordsText=[],this.type="drawing.text",this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),RGraph.OldBrowserCompat(this.context),this.properties={"chart.size":10,"chart.font":"Arial","chart.bold":!1,"chart.angle":0,"chart.colors":["black"],"chart.events.click":null,"chart.events.mousemove":null,"chart.highlight.stroke":"#ccc","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":!0,"chart.tooltips.coords.page":!1,"chart.bounding":!1,"chart.bounding.fill":"rgba(255,255,255,0.7)","chart.bounding.stroke":"#777","chart.bounding.shadow":!1,"chart.bounding.shadow.color":"#ccc","chart.bounding.shadow.blur":3,"chart.bounding.shadow.offsetx":3,"chart.bounding.shadow.offsety":3,"chart.marker":!1,"chart.halign":"left","chart.valign":"bottom"},!this.canvas){alert("[DRAWING.TEXT] No canvas support");return}this.$0={},this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),RGraph.Register(this)},RGraph.Drawing.Text.prototype.Set=function(n,t){return n=n.toLowerCase(),n.substr(0,6)!="chart."&&(n="chart."+n),this.properties[n]=t,this},RGraph.Drawing.Text.prototype.Get=function(n){return n.substr(0,6)!="chart."&&(n="chart."+n),this.properties[n.toLowerCase()]},RGraph.Drawing.Text.prototype.Draw=function(){var r=this.canvas,u=this.canvas,n=this.properties,i,t;return RGraph.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.coords=[],i=RGraph.MeasureText(this.text,n["chart.text.bold"],n["chart.text.font"],n["chart.text.size"]),this.context.fillStyle=n["chart.colors"][0],t=RGraph.Text2(this,{font:n["chart.font"],size:n["chart.size"],x:this.x,y:this.y,text:this.text,bold:n["chart.bold"],angle:n["chart.angle"],bounding:n["chart.bounding"],"bounding.fill":n["chart.bounding.fill"],"bounding.stroke":n["chart.bounding.stroke"],"bounding.shadow":n["chart.bounding.shadow"],"bounding.shadow.color":n["chart.bounding.shadow.color"],"bounding.shadow.blur":n["chart.bounding.shadow.blur"],"bounding.shadow.offsetx":n["chart.bounding.shadow.offsetx"],"bounding.shadow.offsety":n["chart.bounding.shadow.offsety"],marker:n["chart.marker"],halign:n["chart.halign"],valign:n["chart.valign"]}),this.coords.push({x:t.x,y:t.y,width:t.width,height:t.height}),RGraph.InstallEventListeners(this),RGraph.FireCustomEvent(this,"ondraw"),this},RGraph.Drawing.Text.prototype.getObjectByXY=function(n){if(this.getShape(n))return this},RGraph.Drawing.Text.prototype.getShape=function(n){for(var o=this.properties,i=this.coords,s=RGraph.getMouseXY(n),h=s[0],c=s[1],t=0;t<this.coords.length;t++){var r=i[t].x,u=i[t].y,f=i[t].width,e=i[t].height;if(h>=r&&h<=r+f&&c>=u&&c<=u+e)return{0:this,1:r,2:u,3:f,4:e,5:0,object:this,x:r,y:u,width:f,height:e,index:0,tooltip:o["chart.tooltips"]?o["chart.tooltips"][0]:null}}return null},RGraph.Drawing.Text.prototype.positionTooltip=function(n,t,i,r){var s=n.coords[0],o=s.x,c=s.y,h=s.width,l=s.height,e=RGraph.getCanvasXY(n.canvas),f=r.offsetWidth,a=r.offsetHeight,u;r.style.left=0,r.style.top=e[1]+c+l/2-a+"px",r.style.overflow="",u=new Image,u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",u.style.position="absolute",u.id="__rgraph_tooltip_pointer__",u.style.top=r.offsetHeight-2+"px",r.appendChild(u),e[0]+o+h/2-f/2<10?(r.style.left=e[0]+o-f*.1+h/2+"px",u.style.left=f*.1-8.5+"px"):e[0]+o+f/2>document.body.offsetWidth?(r.style.left=e[0]+o-f*.9+h/2+"px",u.style.left=f*.9-8.5+"px"):(r.style.left=e[0]+o+h/2-f*.5+"px",u.style.left=f*.5-8.5+"px")},RGraph.Drawing.Text.prototype.Highlight=function(n){RGraph.Highlight.Rect(this,n)},RGraph.Drawing.Text.prototype.parseColors=function(){var n=this.properties;n["chart.fillstyle"]=this.parseSingleColorForGradient(n["chart.fillstyle"]),n["chart.strokestyle"]=this.parseSingleColorForGradient(n["chart.strokestyle"]),n["chart.highlight.stroke"]=this.parseSingleColorForGradient(n["chart.highlight.stroke"]),n["chart.highlight.fill"]=this.parseSingleColorForGradient(n["chart.highlight.fill"])},RGraph.Drawing.Text.prototype.parseSingleColorForGradient=function(n){var u=this.canvas,f=this.context,t;if(!n)return n;if(n.match(/^gradient\((.*)\)$/i)){var i=RegExp.$1.split(":"),r=f.createLinearGradient(0,0,u.width,0),e=1/(i.length-1);for(r.addColorStop(0,RGraph.trim(i[0])),t=1;t<i.length;++t)r.addColorStop(t*e,RGraph.trim(i[t]))}return r?r:n}