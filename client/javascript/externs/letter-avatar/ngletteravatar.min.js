"use strict";function getRandomColors(){for(var t="0123456789ABCDEF".split(""),a="#",e=0;6>e;e++)a+=t[Math.floor(16*Math.random())];return a}function getFirstAndLastName(t){var a=t.split(" ");if(a&&a.length>=2){var e=a[0],r=a[1];if(e&&r){var o=e.substr(0,1)+r.substr(0,1);return o}return t.substr(0,2)}}function getImgTag(t,a,e){var r=angular.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:t,height:a}).css({"background-color":e,width:t+"px",height:a+"px"});return r}function getCharacterObject(t,a,e,r,o){var i=angular.element('<text text-anchor="middle"></text>').attr({y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:a,"font-family":e}).html(t).css({"font-weight":r,"font-size":o+"px"});return i}var nla=angular.module("ngLetterAvatar",[]);nla.constant("defaultSettings",{alphabetcolors:["#5A8770","#B2B7BB","#6FA9AB","#F5AF29","#0088B9","#F18636","#D93A37","#A6B12E","#5C9BBC","#F5888D","#9A89B5","#407887","#9A89B5","#5A8770","#D33F33","#A2B01F","#F0B126","#0087BF","#F18636","#0087BF","#B2B7BB","#72ACAE","#9C8AB4","#5A8770","#EEB424","#407887"],textColor:"#ffffff",defaultBorder:"border:5px solid white",triangleup:"width: 0;height: 0;border-left: 50px solid transparent;border-right: 50px solid transparent;border-bottom: 100px solid;",fontsize:30,height:50,width:50,fontWeight:400,charCount:1,fontFamily:"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif",base:"data:image/svg+xml;base64,",radius:"border-radius:50%;",custombgcolor:"",dynamic:"false",rotatedeg:"0"}),nla.directive("ngLetterAvatar",["defaultSettings",function(t){return{restrict:"AE",replace:!0,scope:{alphabetcolors:"=alphabetcolors",data:"@"},link:function(a,e,r){function o(){var r="";if(2==i.charCount){var o=getFirstAndLastName(a.data.toUpperCase());r=o?o:a.data.substr(0,i.charCount).toUpperCase()}else r=a.data.substr(0,i.charCount).toUpperCase();var n=getCharacterObject(r,i.textColor,i.fontFamily,i.fontWeight,i.fontsize),d="",s="";r.charCodeAt(0)<65?s=getRandomColors():(d=Math.floor((r.charCodeAt(0)-65)%i.alphabetcolors.length),s=i.alphabetcolors[d]),i.avatarCustomBGColor&&(s=i.avatarCustomBGColor);var l=getImgTag(i.width,i.height,s);l.append(n);var h,g=angular.element("<div>").append(l.clone()).html(),c=window.btoa(unescape(encodeURIComponent(g))),f=t.base,u="";if(i.avatarBorderStyle?u=i.avatarBorderStyle:i.avatardefaultBorder&&(u=i.defaultBorder),"0"!=i.rotatedeg&&(u="-ms-transform: rotate("+i.rotatedeg+"deg); -webkit-transform: rotate("+i.rotatedeg+"deg); transform: rotate("+i.rotatedeg+"deg)"),i.shape){if("round"===i.shape){var p=t.radius+u;if(a.data.indexOf("http")>-1||a.data.indexOf("data:image")>-1){var m="width:"+i.width+"px;height:"+i.height+"px;";h="<img src="+a.data+" style='"+m+p+"'  />"}else h="<img src="+f+c+" style='"+p+"' title='"+a.data+"' />"}}else if(a.data.indexOf("http")>-1||a.data.indexOf("data:image")>-1){var m="width:"+i.width+"px;height:"+i.height+"px;";h="<img src="+a.data+" style='"+m+u+"'  />"}else h="<img src="+f+c+" style='"+u+"' title='"+a.data+"' />";"true"===i.dynamic?(e.empty(),e.append(h)):e.replaceWith(h)}var i={charCount:r.charcount||t.charCount,data:r.data,textColor:t.textColor,height:r.height||t.height,width:r.width||t.width,fontsize:r.fontsize||t.fontsize,fontWeight:r.fontweight||t.fontWeight,fontFamily:r.fontfamily||t.fontFamily,avatarBorderStyle:r.avatarcustomborder,avatardefaultBorder:r.avatarborder,defaultBorder:t.defaultBorder,shape:r.shape,alphabetcolors:a.alphabetcolors||t.alphabetcolors,avatarCustomBGColor:r.avatarcustombgcolor||t.custombgcolor,dynamic:r.dynamic||t.dynamic,rotatedeg:r.rotatedeg||t.rotatedeg};"true"===i.dynamic?a.$watch("data",function(){o()}):o()}}}]);