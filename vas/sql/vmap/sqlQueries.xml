<?xml version="1.0" encoding="utf-8"?>
<sqlQueries>
	<title>Scripts d'installation et de mises à jour de la base du VAS</title>
	<queriesCollection>
		<query>
			<type>init</type>
			<version>2016.01.00</version>
			<code>
				<![CDATA[ 
				select s_vitis.create_role_if_not_exists('vmap_user', 'NOSUPERUSER INHERIT NOCREATEDB NOCREATEROLE NOREPLICATION');
				select s_vitis.create_role_if_not_exists('vmap_admin', 'NOSUPERUSER INHERIT NOCREATEDB NOCREATEROLE NOREPLICATION');
				GRANT vmap_user TO vmap_admin;
				CREATE SCHEMA s_vmap AUTHORIZATION u_vitis;
				GRANT ALL ON SCHEMA s_vmap TO u_vitis;
				GRANT USAGE ON SCHEMA s_vmap TO vmap_admin;
				GRANT USAGE ON SCHEMA s_vmap TO vmap_user;
				CREATE SEQUENCE s_vmap.seq_common INCREMENT BY 1 MINVALUE 1 NO MAXVALUE START WITH 1;
				ALTER TABLE s_vmap.seq_common OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.seq_common TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.seq_common TO vmap_user;
				CREATE TABLE s_vmap.version(   version character varying(10) NOT NULL,    build integer NOT NULL,    date timestamp with time zone NOT NULL,    active boolean,  CONSTRAINT pk_version PRIMARY KEY (version));
				ALTER TABLE s_vmap.version  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.version TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.version TO vmap_user;
				CREATE TABLE s_vmap.rt_service_type (service_type_id varchar(30) NOT NULL, CONSTRAINT rt_service_type_pkey PRIMARY KEY (service_type_id));
				ALTER TABLE s_vmap.rt_service_type  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.rt_service_type TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.rt_service_type TO vmap_user;
				COMMENT ON COLUMN s_vmap.rt_service_type.service_type_id IS 'tilewms, bing, osm etc...';
				CREATE TABLE s_vmap.service (service_id int4 DEFAULT nextval('s_vmap.seq_common') NOT NULL, service_type_id varchar(30) NOT NULL, name varchar(100), description text, url text, "key" varchar(255), service_type_version varchar(20), thumbnail text, lang varchar(100), imagery varchar(100), CONSTRAINT service_pkey PRIMARY KEY (service_id));
				ALTER TABLE s_vmap.service  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.service TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.service TO vmap_user;
				COMMENT ON COLUMN s_vmap.service.service_id IS 'service name';
				COMMENT ON COLUMN s_vmap.service.service_type_id IS 'tilewms, bing, osm etc...';
				COMMENT ON COLUMN s_vmap.service.description IS 'service description';
				COMMENT ON COLUMN s_vmap.service.url IS 'service url';
				COMMENT ON COLUMN s_vmap.service."key" IS 'service key (bing maps, geoportail etc..)';
				COMMENT ON COLUMN s_vmap.service.service_type_version IS 'wms version (ex: "1.1.0")';
				CREATE TABLE s_vmap.rt_crs (crs_id varchar(20) NOT NULL, name varchar(100), CONSTRAINT rt_crs_pkey PRIMARY KEY (crs_id));
				ALTER TABLE s_vmap.rt_crs  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.rt_crs TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.rt_crs TO vmap_user;
				COMMENT ON COLUMN s_vmap.rt_crs.crs_id IS 'EPSG system code (ex EPSG:2154)';
				COMMENT ON COLUMN s_vmap.rt_crs.name IS 'name of the projection system (ex: lambert 93)';
				CREATE TABLE s_vmap.layertheme (layertheme_id int4 DEFAULT nextval('s_vmap.seq_common') NOT NULL, name varchar(100), description text, CONSTRAINT theme_pkey PRIMARY KEY (layertheme_id));
				ALTER TABLE s_vmap.layertheme  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.layertheme TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.layertheme TO vmap_user;
				COMMENT ON COLUMN s_vmap.layertheme.layertheme_id IS 'theme name';
				COMMENT ON COLUMN s_vmap.layertheme.description IS 'theme description';
				CREATE TABLE s_vmap.map_group (map_id int4 NOT NULL, group_id int4 NOT NULL, CONSTRAINT map_group_pkey PRIMARY KEY (map_id, group_id));
				ALTER TABLE s_vmap.map_group  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.map_group TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.map_group TO vmap_user;
				CREATE TABLE s_vmap.map_layer (map_id int4 NOT NULL, layer_id int4 NOT NULL, layer_index int4 DEFAULT 0, layer_visible bool DEFAULT 'true', layer_opacity int4 DEFAULT 100, CONSTRAINT map_layer_pkey PRIMARY KEY (map_id, layer_id));
				ALTER TABLE s_vmap.map_layer  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.map_layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.map_layer TO vmap_user;
				COMMENT ON COLUMN s_vmap.map_layer.layer_index IS 'Allows to manage the layer order in to the map';
				COMMENT ON COLUMN s_vmap.map_layer.layer_visible IS 'Allows to manage the visibility of the layer in to the map';
				COMMENT ON COLUMN s_vmap.map_layer.layer_opacity IS 'Allows to manage the opacity of the layer in to the map';
				CREATE TABLE s_vmap.layer (layer_id int4 DEFAULT nextval('s_vmap.seq_common') NOT NULL, layertheme_id int4, service_id int4 NOT NULL, name varchar(100), description text, layer_list text, crs_list text, bo_id varchar(100), is_dynamic boolean, is_filtered boolean, CONSTRAINT layer_pkey PRIMARY KEY (layer_id));
				ALTER TABLE s_vmap.layer  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.layer TO vmap_user;
				COMMENT ON COLUMN s_vmap.layer.layer_id IS 'layer name';
				COMMENT ON COLUMN s_vmap.layer.layertheme_id IS 'theme id';
				COMMENT ON COLUMN s_vmap.layer.service_id IS 'service name';
				COMMENT ON COLUMN s_vmap.layer.description IS 'layer description';
				COMMENT ON COLUMN s_vmap.layer.layer_list IS 'wms, bing etc.. layer list, can be multiple for wms services only (ex: "zone_activite_audelor,za_terrain_audelor")';
				COMMENT ON COLUMN s_vmap.layer.crs_list IS 'getCapabilities CRS (ex: "EPSG:2154|EPSG:3857|CRS:84"). Available coordinates systems for the layer';
				COMMENT ON COLUMN s_vmap.layer.bo_id IS 'id of the business object';
				COMMENT ON COLUMN s_vmap.layer.is_dynamic IS 'true to avoid caches';
				COMMENT ON COLUMN s_vmap.layer.is_filtered IS 'true to use layer filter';
				CREATE TABLE s_vmap.event (event_id varchar(50) NOT NULL, description text, PRIMARY KEY (event_id));
				ALTER TABLE s_vmap.event  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.event TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.event TO vmap_user;
				CREATE TABLE s_vmap.layer_event (layer_id int4 NOT NULL, event_id varchar(50) NOT NULL, PRIMARY KEY (layer_id, event_id));
				ALTER TABLE s_vmap.layer_event  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.layer_event TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.layer_event TO vmap_user;
				CREATE TABLE s_vmap.maptheme (maptheme_id  SERIAL NOT NULL, name varchar(100), description text, PRIMARY KEY (maptheme_id));
				ALTER TABLE s_vmap.maptheme  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.maptheme TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.maptheme TO vmap_user;
				COMMENT ON COLUMN s_vmap.maptheme.name IS 'theme name';
				COMMENT ON COLUMN s_vmap.maptheme.description IS 'theme description';
				CREATE TABLE s_vmap.map (map_id int4 DEFAULT nextval('s_vmap.seq_common') NOT NULL, crs_id varchar(20) NOT NULL, name varchar(100) NOT NULL, description text, extent varchar(225) NOT NULL, catalog_index int4, thumbnail text, maptheme_id int4, CONSTRAINT map_pkey PRIMARY KEY (map_id));
				ALTER TABLE s_vmap.map  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.map TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.map TO vmap_user;
				COMMENT ON COLUMN s_vmap.map.map_id IS 'map name';
				COMMENT ON COLUMN s_vmap.map.crs_id IS 'EPSG system code (ex EPSG:2154)';
				COMMENT ON COLUMN s_vmap.map.description IS 'map description';
				COMMENT ON COLUMN s_vmap.map.extent IS 'extent of the map';
				COMMENT ON COLUMN s_vmap.map.catalog_index IS 'index in the catalog';
				COMMENT ON COLUMN s_vmap.map.maptheme_id IS 'theme';
				CREATE TABLE s_vmap.module (module_id varchar(50) NOT NULL, description text, label varchar(50), rolname varchar(100) NOT NULL, PRIMARY KEY (module_id));
				ALTER TABLE s_vmap.module  OWNER TO u_vitis;
				COMMENT ON TABLE s_vmap.module IS 'La gestion des droits sur chacun des modules se fait grâce aux privilèges.Les privilèges sont les roles groupes de Postgres';
				GRANT SELECT ON TABLE s_vmap.map TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.map TO vmap_user;
				CREATE TABLE s_vmap.printtemplate (printtemplate_id  SERIAL NOT NULL, name varchar(100) NOT NULL UNIQUE, rt_format_id varchar(2) NOT NULL, rt_orientation_id varchar(8) NOT NULL, definition text NOT NULL, outputformats_id varchar(255) NOT NULL, sql text, ressource_id varchar(100), business_object_id varchar(50), PRIMARY KEY (printtemplate_id));
				ALTER TABLE s_vmap.printtemplate  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.printtemplate TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.printtemplate TO vmap_user;
				CREATE TABLE s_vmap.printtemplate_group (printtemplate_id int4 NOT NULL, group_id int4 NOT NULL, PRIMARY KEY (printtemplate_id, group_id));
				ALTER TABLE s_vmap.printtemplate_group  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.printtemplate_group TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.printtemplate_group TO vmap_user;
				CREATE TABLE s_vmap.rt_format (rt_format_id varchar(2) NOT NULL, PRIMARY KEY (rt_format_id));
				ALTER TABLE s_vmap.rt_format  OWNER TO u_vitis;
				GRANT SELECT ON TABLE s_vmap.rt_format TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.rt_format TO vmap_user;
				CREATE TABLE s_vmap.rt_orientation (rt_orientation_id varchar(8) NOT NULL, PRIMARY KEY (rt_orientation_id));
				ALTER TABLE s_vmap.rt_orientation  OWNER TO u_vitis;
				GRANT SELECT ON TABLE s_vmap.rt_orientation TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.rt_orientation TO vmap_user;
				CREATE TABLE s_vmap.printparameter (printparameter_id  SERIAL NOT NULL, printtemplate_id int4 NOT NULL, name varchar(100) NOT NULL, editable bool, label varchar(100), placeholder text, defaultvalue text, PRIMARY KEY (printparameter_id));
				ALTER TABLE s_vmap.printparameter  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.printparameter TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.printparameter TO vmap_user;
				CREATE TABLE s_vmap.rt_outputformats (outputformats_id varchar(255) NOT NULL, PRIMARY KEY (outputformats_id));
				ALTER TABLE s_vmap.rt_outputformats  OWNER TO u_vitis;
				GRANT SELECT ON TABLE s_vmap.rt_outputformats TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.rt_outputformats TO vmap_user;
				CREATE TABLE s_vmap.printstyle (printstyle_id  SERIAL NOT NULL, name varchar(100) NOT NULL UNIQUE, definition text, PRIMARY KEY (printstyle_id));
				ALTER TABLE s_vmap.printstyle  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.printstyle TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.printstyle TO vmap_user;
				CREATE TABLE s_vmap.user_printstyle (printstyle_id int4 NOT NULL, user_id int4 NOT NULL, PRIMARY KEY (printstyle_id, user_id));
				ALTER TABLE s_vmap.user_printstyle  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.user_printstyle TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.user_printstyle TO vmap_user;
				CREATE TABLE s_vmap.business_object (business_object_id character varying(50) NOT NULL, title character varying(100), id_field character varying(30), database character varying(30), schema character varying(30), "table" character varying(30), sql_summary text, sql_list text, sorted_by character varying(100), geom_column character varying(30), search_field character varying(50), result_field character varying(50), search_use_strict character varying(30), event_id character varying(50));
				ALTER TABLE s_vmap.business_object OWNER TO u_vitis;
				COMMENT ON TABLE s_vmap.business_object IS 'contains the parameters of elements to show when making a layer query';
				COMMENT ON COLUMN s_vmap.business_object.business_object_id IS 'ex: "veremes_cadastre_commune"';
				COMMENT ON COLUMN s_vmap.business_object.id_field IS 'unique id field of the table';
				COMMENT ON COLUMN s_vmap.business_object.database IS 'database where find the data of the business object';
				COMMENT ON COLUMN s_vmap.business_object.schema IS 'schema where find the data of the business object';
				COMMENT ON COLUMN s_vmap.business_object."table" IS 'table where find the data of the business object';
				COMMENT ON COLUMN s_vmap.business_object.sql_summary IS 'sql request to get the infos showed on first (example popup)';
				COMMENT ON COLUMN s_vmap.business_object.sql_list IS 'sql request to get the infos to show on detail mode';
				COMMENT ON COLUMN s_vmap.business_object.sorted_by IS 'sorted_by sql attr';
				REVOKE ALL ON TABLE s_vmap.business_object FROM PUBLIC;
				REVOKE ALL ON TABLE s_vmap.business_object FROM u_vitis;
				GRANT ALL ON TABLE s_vmap.business_object TO u_vitis;
				GRANT ALL ON TABLE s_vmap.business_object TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.business_object TO vmap_user;
				COMMENT ON COLUMN s_vmap.business_object.geom_column IS 'column witch contains the geometry of the BO';
				CREATE OR REPLACE VIEW s_vmap.v_layer AS SELECT s_vmap.layertheme.name AS theme_name, s_vmap.service.name AS service_name, s_vmap.service.service_type_id, s_vmap.service.url AS service_url, s_vmap.service."key" AS service_key, s_vmap.service.service_type_version, s_vmap.service.thumbnail AS service_thumbnail, s_vmap.service.lang AS service_lang, s_vmap.service.imagery AS service_imagery, s_vmap.business_object.title AS bo_title, s_vmap.business_object.id_field AS bo_id_field, s_vmap.business_object."database" AS bo_database, s_vmap.business_object."schema" AS bo_schema, s_vmap.business_object."table" AS bo_table, s_vmap.business_object.sql_summary AS bo_sql_summary, s_vmap.business_object.sql_list AS bo_sql_list, s_vmap.business_object.sorted_by AS bo_sorted_by, s_vmap.business_object.geom_column AS bo_geom_column, s_vmap.business_object.search_field AS bo_search_field, s_vmap.business_object.result_field AS bo_result_field, s_vmap.business_object.search_use_strict AS bo_search_use_strict, s_vmap.layer.layer_id, s_vmap.layer.layertheme_id, s_vmap.layer.service_id, s_vmap.layer.name, s_vmap.layer.description, s_vmap.layer.layer_list, s_vmap.layer.crs_list, s_vmap.layer.bo_id, s_vmap.layer.is_dynamic, s_vmap.layer.is_filtered FROM s_vmap.layer LEFT JOIN s_vmap.business_object ON s_vmap.layer.bo_id = s_vmap.business_object.business_object_id LEFT JOIN s_vmap.layertheme ON s_vmap.layer.layertheme_id = s_vmap.layertheme.layertheme_id INNER JOIN s_vmap.service ON s_vmap.layer.service_id = s_vmap.service.service_id;
				GRANT ALL ON TABLE s_vmap.v_layer TO vitis_admin;
				GRANT ALL ON TABLE s_vmap.v_layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_layer TO vitis_user;
				GRANT SELECT ON TABLE s_vmap.v_layer TO vmap_user;
				CREATE VIEW s_vmap.v_map AS SELECT s_vmap.maptheme.name AS theme_name, s_vmap.maptheme.description AS theme_description, s_vmap.rt_crs.name AS crs_name, s_vmap.map.map_id, s_vmap.map.crs_id, s_vmap.map.name, s_vmap.map.description, s_vmap.map.extent, s_vmap.map.catalog_index, s_vmap.map.thumbnail, s_vmap.map.maptheme_id FROM s_vmap.maptheme RIGHT JOIN s_vmap.map ON s_vmap.maptheme.maptheme_id = s_vmap.map.maptheme_id INNER JOIN s_vmap.rt_crs ON s_vmap.map.crs_id = s_vmap.rt_crs.crs_id;
				GRANT ALL ON TABLE s_vmap.v_map TO postgres;
				GRANT ALL ON TABLE s_vmap.v_map TO vitis_admin;
				GRANT ALL ON TABLE s_vmap.v_map TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_map TO vitis_user;
				GRANT SELECT ON TABLE s_vmap.v_map TO vmap_user;
				CREATE UNIQUE INDEX maptheme_name ON s_vmap.maptheme (name);
				CREATE UNIQUE INDEX service_name ON s_vmap.service (name);
				CREATE UNIQUE INDEX rt_crs_name ON s_vmap.rt_crs (name);
				CREATE UNIQUE INDEX theme_name ON s_vmap.layertheme (name);
				CREATE UNIQUE INDEX layer_name ON s_vmap.layer (name);
				CREATE UNIQUE INDEX map_name ON s_vmap.map (name);
				ALTER TABLE s_vmap.map ADD CONSTRAINT fk_map_rt_crs FOREIGN KEY (crs_id) REFERENCES s_vmap.rt_crs (crs_id) ON UPDATE Cascade ON DELETE Restrict;
				ALTER TABLE s_vmap.layer ADD CONSTRAINT fk_layer_service FOREIGN KEY (service_id) REFERENCES s_vmap.service (service_id) ON UPDATE Cascade ON DELETE Restrict;
				ALTER TABLE s_vmap.service ADD CONSTRAINT fk_rt_service_service_type FOREIGN KEY (service_type_id) REFERENCES s_vmap.rt_service_type (service_type_id) ON UPDATE Cascade ON DELETE Restrict;
				ALTER TABLE s_vmap.map_layer ADD CONSTRAINT fk_map_layer_layer FOREIGN KEY (layer_id) REFERENCES s_vmap.layer (layer_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.map_layer ADD CONSTRAINT fk_map_layer_map FOREIGN KEY (map_id) REFERENCES s_vmap.map (map_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.map_group ADD CONSTRAINT fk_map_group_group FOREIGN KEY (group_id) REFERENCES s_vitis."group" (group_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.map_group ADD CONSTRAINT fk_map_group_map FOREIGN KEY (map_id) REFERENCES s_vmap.map (map_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.map ADD CONSTRAINT fk_map_maptheme FOREIGN KEY (maptheme_id) REFERENCES s_vmap.maptheme (maptheme_id) ON UPDATE Cascade ON DELETE Restrict;
				ALTER TABLE s_vmap.module ADD CONSTRAINT fk_module_privilege FOREIGN KEY (rolname) REFERENCES s_vitis.privileges (rolname) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.printtemplate_group ADD CONSTRAINT fk_printtemplate_group_group FOREIGN KEY (group_id) REFERENCES s_vitis."group" (group_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE ONLY s_vmap.business_object ADD CONSTRAINT business_object_pkey PRIMARY KEY (business_object_id);
				ALTER TABLE s_vmap.user_printstyle ADD CONSTRAINT fk_user_printstyle_user FOREIGN KEY (user_id) REFERENCES s_vitis."user" (user_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.printtemplate_group ADD CONSTRAINT FKprinttempl72315 FOREIGN KEY (printtemplate_id) REFERENCES s_vmap.printtemplate (printtemplate_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.printtemplate ADD CONSTRAINT FKprinttempl680758 FOREIGN KEY (rt_format_id) REFERENCES s_vmap.rt_format (rt_format_id);
				ALTER TABLE s_vmap.printtemplate ADD CONSTRAINT FKprinttempl340779 FOREIGN KEY (rt_orientation_id) REFERENCES s_vmap.rt_orientation (rt_orientation_id);
				ALTER TABLE s_vmap.printparameter ADD CONSTRAINT FKprintparam828463 FOREIGN KEY (printtemplate_id) REFERENCES s_vmap.printtemplate (printtemplate_id) ON UPDATE Cascade ON DELETE Cascade;
				ALTER TABLE s_vmap.printtemplate ADD CONSTRAINT FKprinttempl395374 FOREIGN KEY (outputformats_id) REFERENCES s_vmap.rt_outputformats (outputformats_id);
				ALTER TABLE s_vmap.user_printstyle ADD CONSTRAINT FKuser_print429318 FOREIGN KEY (printstyle_id) REFERENCES s_vmap.printstyle (printstyle_id);
				ALTER TABLE s_vmap.layer_event ADD CONSTRAINT FKlayer_even735484 FOREIGN KEY (layer_id) REFERENCES s_vmap.layer (layer_id);
				ALTER TABLE s_vmap.layer_event ADD CONSTRAINT FKlayer_even639107 FOREIGN KEY (event_id) REFERENCES s_vmap.event (event_id);
				GRANT SELECT ON TABLE public.geometry_columns TO vitis_user;
				GRANT SELECT ON TABLE public.geometry_columns TO vitis_admin;
				INSERT INTO s_vitis.vm_module (module_id, description, version, label) VALUES ('vmap', 'module vmap', 0.1, 'vmap');
				INSERT INTO s_vitis.vm_mode (mode_id, module_id) VALUES ('vmap', 'vmap');
				INSERT INTO s_vitis.vm_mode (mode_id, module_id) VALUES ('vmap_business_object', 'vmap');
				INSERT INTO s_vitis.privileges(rolname, description) VALUES ('vmap_user', 'utilisateur vmap');
				INSERT INTO s_vitis.privileges(rolname, description) VALUES ('vmap_admin', 'administrateur vmap');
				INSERT INTO s_vitis.vm_mode_rolname(index, mode_id, rolname) VALUES (0, 'vmap', 'vmap_user');
				INSERT INTO s_vitis.vm_mode_rolname(index, mode_id, rolname) VALUES (45, 'vmap_business_object', 'vmap_admin');
				INSERT INTO s_vitis.vm_tab(tab_id, event, index, mode_id, label_id, name) VALUES ((SELECT nextval('s_vitis.seq_vm'::regclass)), 'javascript:loadVmap();', 0, 'vmap', 'vitis_1', 'vmap_map');
				INSERT INTO s_vitis.vm_section(section_id, label_id, name, index, event, tab_id, template, module) VALUES ((SELECT nextval('s_vitis.seq_vm'::regclass)), 'vitis_1', 'general', 1, 'Javascript:reloadSectionForm', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_map'), 'modules/vmap/index-vitis.html', 'vmap');
				INSERT INTO s_vitis.vm_mode (mode_id, module_id) VALUES ('vmap_admin_map', 'vmap');
				INSERT INTO s_vitis.vm_mode_rolname (rolname, mode_id, "index") VALUES ('vmap_admin', 'vmap_admin_map', 40);
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Chaine de caractère nulle', 'vmap_1');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Cartes" du mode "vmap"', 'vmap_2');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Services" du mode "vmap"', 'vmap_3');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Calques" du mode "vmap"', 'vmap_4');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_map', 'vmap_5');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_map', 'vmap_6');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ map_id de l''onglet vmap_map', 'vmap_7');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_map"', 'vmap_8');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ catalog_index de l''onglet vmap_map', 'vmap_9');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_map', 'vmap_10');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ theme_name de l''onglet vmap_map', 'vmap_11');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ crs_name de l''onglet vmap_map', 'vmap_12');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ description de l''onglet vmap_map', 'vmap_13');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ thumbnail de l''onglet vmap_map', 'vmap_14');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_service"', 'vmap_15');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_service', 'vmap_16');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_service', 'vmap_17');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ service_id de l''onglet vmap_service', 'vmap_18');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_service', 'vmap_19');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ service_type_id de l''onglet vmap_service', 'vmap_20');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ description de l''onglet vmap_service', 'vmap_21');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ url de l''onglet vmap_service', 'vmap_22');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ service_type_version de l''onglet vmap_service', 'vmap_23');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ thumbnail de l''onglet vmap_service', 'vmap_24');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_layer"', 'vmap_25');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_layer', 'vmap_26');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_layer', 'vmap_27');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ layer_id de l''onglet vmap_layer', 'vmap_28');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_layer', 'vmap_29');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ description de l''onglet vmap_layer', 'vmap_30');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ layertheme_name de l''onglet vmap_layer', 'vmap_31');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_1', 'fr', NULL);
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_1', 'en', NULL);
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_2', 'fr', 'Cartes');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_2', 'en', 'Maps');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_3', 'fr', 'Services');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_3', 'en', 'Services');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_4', 'fr', 'Calques');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_4', 'en', 'Layers');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_5', 'fr', 'Ajouter une carte');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_5', 'en', 'Add map');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_6', 'fr', 'Supprimer les cartes');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_6', 'en', 'Delete maps');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_7', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_7', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_8', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_8', 'en', 'General');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_9', 'fr', 'Ordre');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_9', 'en', 'Order');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_10', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_10', 'en', 'Name');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_11', 'fr', 'Thème');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_11', 'en', 'Theme');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_12', 'fr', 'Système de coordonnées');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_12', 'en', 'Coordinate system');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_13', 'fr', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_13', 'en', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_14', 'fr', 'Vignette');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_14', 'en', 'Thumbnail');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_15', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_15', 'en', 'General');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_16', 'fr', 'Ajouter un service');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_16', 'en', 'Add service');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_17', 'fr', 'Supprimer les services');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_17', 'en', 'Delete services');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_18', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_18', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_19', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_19', 'en', 'Name');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_20', 'fr', 'Type');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_20', 'en', 'Type');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_21', 'fr', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_21', 'en', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_22', 'fr', 'Lien');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_22', 'en', 'Link');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_23', 'fr', 'Version');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_23', 'en', 'Version');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_24', 'fr', 'Vignette');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_24', 'en', 'Thumbnail');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_25', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_25', 'en', 'General');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_26', 'fr', 'Ajouter un calque');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_26', 'en', 'Add layer');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_27', 'fr', 'Supprimer les calques');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_27', 'en', 'Delete layers');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_28', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_28', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_29', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_29', 'en', 'Name');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_30', 'fr', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_30', 'en', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_31', 'fr', 'Thème');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_31', 'en', 'Theme');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Section vmap de l''onglet framework_group', 'vmap_32');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_32', 'fr', 'vMap');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_32', 'en', 'vMap');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ service_name de l''onglet vmap_layer', 'vmap_33');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_33', 'fr', 'Service');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_33', 'en', 'Service');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ crs_list de l''onglet vmap_map', 'vmap_34');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_34', 'fr', 'Système de coordonnées');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_34', 'en', 'Coordinate system');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "calques de la carte" de l''onglet "vmap_map"', 'vmap_35');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_35', 'fr', 'Calques de la carte');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_35', 'en', 'Map layers');
				CREATE OR REPLACE VIEW s_vmap.v_map_layer AS SELECT v_layer.layer_id,v_layer.name,v_layer.theme_name,map_layer.layer_visible,map_layer.map_id,map_layer.layer_index,map_layer.layer_opacity,v_layer.layertheme_id,v_layer.service_id FROM s_vmap.v_layer,s_vmap.map_layer WHERE v_layer.layer_id=map_layer.layer_id;
				GRANT ALL ON TABLE s_vmap.v_map_layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_map_layer TO vmap_user;
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Thèmes des calques" du mode "vmap"', 'vmap_36');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_layer_theme"', 'vmap_37');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_layer_theme', 'vmap_38');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_layer_theme', 'vmap_39');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ layertheme_id de l''onglet vmap_layer_theme', 'vmap_40');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_layer_theme', 'vmap_41');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ description de l''onglet vmap_layer_theme', 'vmap_42');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_36', 'fr', 'Thèmes des calques');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_36', 'en', 'Themes layers');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_37', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_37', 'en', 'General');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_38', 'fr', 'Ajouter un thème');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_38', 'en', 'Add theme');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_39', 'fr', 'Supprimer les thèmes');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_39', 'en', 'Delete themes');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_40', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_40', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_41', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_41', 'en', 'Name');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_42', 'fr', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_42', 'en', 'Description');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Thèmes des cartes" du mode "vmap"', 'vmap_43');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_map_theme"', 'vmap_44');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_map_theme', 'vmap_45');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_map_theme', 'vmap_46');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ maptheme_id de l''onglet vmap_map_theme', 'vmap_47');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_map_theme', 'vmap_48');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ description de l''onglet vmap_map_theme', 'vmap_49');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_43', 'fr', 'Thèmes des cartes');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_43', 'en', 'Maps layers');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_44', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_44', 'en', 'General');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_45', 'fr', 'Ajouter un thème');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_45', 'en', 'Add theme');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_46', 'fr', 'Supprimer les thèmes');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_46', 'en', 'Delete themes');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_47', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_47', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_48', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_48', 'en', 'Name');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_49', 'fr', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_49', 'en', 'Description');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_map', 'vmap_2', 'loadList()', 2, 'vmap/maps', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_admin_map');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_map', 'vmap_3', 'loadList()', 0, 'vmap/services', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_services');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_map', 'vmap_4', 'loadList()', 1, 'vmap/layers', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_layers');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_map', 'vmap_36', 'loadList()', 3, 'vmap/layerthemes', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_layer_theme');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_map', 'vmap_43', 'loadList()', 4, 'vmap/mapthemes', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_map_theme');
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('add_smallFlexigrid', 'AddSectionForm', 'vmap_5', 'vmap/maps', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ( 'deleteFlexigrid', 'DeleteSelection', 'vmap_6', 'vmap/maps', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ( 'add_smallFlexigrid', 'AddSectionForm', 'vmap_16', 'vmap/services', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_services'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_17', 'vmap/services', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_services'));
				INSERT INTO s_vitis.vm_table_button ( button_class, event, label_id, ressource_id, tab_id) VALUES ('add_smallFlexigrid', 'AddSectionForm', 'vmap_26', 'vmap/layers', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_layers'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_27', 'vmap/layers', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_layers'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('add_smallFlexigrid', 'AddSectionForm', 'vmap_38', 'vmap/layerthemes', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_layer_theme'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_39', 'vmap/layerthemes', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_layer_theme'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('add_smallFlexigrid', 'AddSectionForm', 'vmap_45', 'vmap/mapthemes', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_map_theme'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_46', 'vmap/mapthemes', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_map_theme'));
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_8', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'), nextval('s_vitis.seq_vm'), 'vmap');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_15', 'general', 2, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'), nextval('s_vitis.seq_vm'), 'vmap');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, ressource_id, module) VALUES ('vmap_25', 'general', 3, 'showStudioIfLayerIsFiltered()', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layers'), nextval('s_vitis.seq_vm'), 'vmap/layers', 'vmap');
				INSERT INTO s_vitis.vm_section (name, event, label_id, "index",  template, tab_id, section_id, ressource_id, module) VALUES ('vmap_group', 'loadVmapGroup()', 'vmap_32', 2, 'simpleFormTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vitis_group'), nextval('s_vitis.seq_vm'), 'vmap/vmapgroups', 'vmap');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, ressource_id, module) VALUES ('vmap_35', 'layers', 2, 'loadVmapMapLayers', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'), nextval('s_vitis.seq_vm'), 'vmap/maplayers', 'vmap');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, ressource_id, module) VALUES ('vmap_37', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer_theme'), nextval('s_vitis.seq_vm'), 'vmap/layerthemes', 'vmap');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, ressource_id, module) VALUES ('vmap_44', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_map_theme'), nextval('s_vitis.seq_vm'), 'vmap/mapthemes', 'vmap');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('map_id', true, true, 1,  30, 'right', 'vmap_7', 'vmap/maps', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('name', true, true, 2,  200, 'left', 'vmap_10', 'vmap/maps', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('catalog_index', true, true, 3,  40, 'right', 'vmap_9', 'vmap/maps', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('theme_name', true, true, 4,  160, 'left', 'vmap_11', 'vmap/maps', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('crs_name', true, true, 5,  160, 'left', 'vmap_12', 'vmap/maps', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES  ('description', true, true, 6,  80, 'center', 'vmap_13', 'vmap/maps', '<div data-app-map-description-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES  ('thumbnail', true, true, 7,  60, 'center', 'vmap_14', 'vmap/maps', '<div data-app-map-thumbnail-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_map'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'service_id', true, true, 1,  30, 'right', 'vmap_18', 'vmap/services' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'name', true, true, 2,  200, 'left', 'vmap_19', 'vmap/services' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'service_type_id', true, true, 3,  100, 'left', 'vmap_20', 'vmap/services' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES ( 'description', true, true, 4,  80, 'center', 'vmap_21', 'vmap/services', '<div data-app-service-description-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES ( 'url', true, true, 5,  60, 'center', 'vmap_22', 'vmap/services', '<div data-app-service-url-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'service_type_version', true, true, 6,  60, 'right', 'vmap_23', 'vmap/services' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES ( 'thumbnail', true, true, 7,  60, 'center', 'vmap_24', 'vmap/services', '<div data-app-service-thumbnail-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_services'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'layer_id', true, true, 1,  30, 'right', 'vmap_28', 'vmap/layers' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'name', true, true, 2,  200, 'left', 'vmap_29', 'vmap/layers' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES ( 'description', true, true, 3,  80, 'center', 'vmap_30', 'vmap/layers', '<div data-app-layer-description-column="{{row.entity[col.field]}}"></div>' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'theme_name', true, true, 4,  160, 'left', 'vmap_31', 'vmap/layers' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'service_name', true, true, 5, 160, 'left', 'vmap_33', 'vmap/layers' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES ( 'crs_list', true, true, 5,  160, 'left', 'vmap_34', 'vmap/layers', '<div data-app-crs-list-description-column=""></div>' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'layertheme_id', true, true, 1,  30, 'right', 'vmap_40', 'vmap/layerthemes' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer_theme'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ( 'name', true, true, 2,  200, 'left', 'vmap_41', 'vmap/layerthemes' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer_theme'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES ( 'description', true, true, 3,  80, 'center', 'vmap_42', 'vmap/layerthemes', '<div data-app-layer-theme-description-column=""></div>' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer_theme'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES( 'maptheme_id', true, true, 1,  30, 'right', 'vmap_47', 'vmap/mapthemes' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_map_theme'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES( 'name', true, true, 2,  200, 'left', 'vmap_48', 'vmap/mapthemes' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_map_theme'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES( 'description', true, true, 3,  80, 'center', 'vmap_49', 'vmap/mapthemes', '<div data-app-map-theme-description-column=""></div>' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_map_theme'));
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Business object', 'vmap_50');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_50', 'en', 'Business object');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_50', 'fr', 'Objet métier');
				INSERT INTO s_vitis.vm_tab(event, index, mode_id, label_id, ressource_id, edit_column, show_column, sorted_by, sorted_dir, name)  VALUES ('loadList()', 0, 'vmap_business_object', 'vmap_50', 'vmap/businessobjects', 'editSectionForm', 'showSectionForm', 'business_object_id', 'ASC', 'vmap_business_object');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Title', 'vmap_51');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_51', 'en', 'Title');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_51', 'fr', 'Titre');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Database', 'vmap_52');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_52', 'en', 'Database');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_52', 'fr', 'Base de données');
				INSERT INTO s_vitis.vm_section(label_id, name, index, event, tab_id, template, module)  VALUES ('vmap_50', 'general', 1, 'Javascript:loadSectionForm', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'workspaceListTpl.html', 'vmap');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id)  VALUES ('business_object_id', 'TRUE', 'TRUE', 1, 180, 'left', 'vmap_50', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('title', 'TRUE', 'TRUE', 2, 124, 'left', 'vmap_51', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('database', 'TRUE', 'TRUE', 3, 124, 'left', 'vmap_52', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Schema', 'vmap_53');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_53', 'en', 'Schema');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_53', 'fr', 'Schema');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('schema', 'TRUE', 'TRUE', 4, 124, 'left', 'vmap_53', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Table', 'vmap_54');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_54', 'en', 'Table');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_54', 'fr', 'Table');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('table', 'TRUE', 'TRUE', 4, 124, 'left', 'vmap_54', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Id field', 'vmap_55');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_55', 'en', 'Id field');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_55', 'fr', 'Champ identifiant');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('id_field', 'TRUE', 'TRUE', 5, 124, 'left', 'vmap_55', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('New business object', 'vmap_58');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_58', 'fr', 'Ajouter un objet métier');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_58', 'en', 'Add business object');
				INSERT INTO s_vitis.vm_table_button(button_class, event, label_id, tab_id, ressource_id) VALUES ('add_smallFlexigrid', 'AddSectionForm', 'vmap_58', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Delete business object', 'vmap_59');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_59', 'fr', 'Supprimer les objets métier');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_59', 'en', 'Delete business object');
				INSERT INTO s_vitis.vm_table_button( button_class, event, label_id, tab_id, ressource_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_59', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'vmap/businessobjects');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Forms', 'vmap_60');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation)  VALUES ('vmap_60', 'fr', 'Formulaires');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_60', 'en', 'Forms');
				INSERT INTO s_vitis.vm_section(label_id, name, index, event, tab_id, template, module) VALUES ('vmap_60', 'studio', 2, 'loadStudioVmap(''business_object'')', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object'), 'modules/vmap/template/studio.html', 'vmap');
				ALTER TABLE s_vmap.v_layer  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_map_layer TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_map_layer TO vitis_admin;
				GRANT ALL ON TABLE s_vmap.v_map_layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_map_layer TO vitis_user;
				GRANT SELECT ON TABLE s_vmap.v_map_layer TO vmap_user;
				ALTER TABLE s_vmap.v_map OWNER TO u_vitis;
				ALTER TABLE s_vmap.v_map_layer  OWNER TO u_vitis;
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Modules vMap" du mode "vmap"', 'vmap_61');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_admin_module"', 'vmap_62');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_61', 'fr', 'Modules vMap');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_61', 'en', 'vMap modules');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_62', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_62', 'en', 'General');
				INSERT INTO s_vitis.vm_mode (mode_id, module_id) VALUES ('vmap_admin_module', 'vmap');
				INSERT INTO s_vitis.vm_mode_rolname (rolname, mode_id, "index") VALUES ('vmap_admin', 'vmap_admin_module', 60);
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_module', 'vmap_61', 'loadList()', 0, 'vmap/modules', NULL, 'showSectionForm', 'label', 'ASC', 'vmap_admin_module');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_62', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_module'), nextval('s_vitis.seq_vm'), 'vmap');
				GRANT ALL ON TABLE s_vmap.module TO u_vitis;
				GRANT ALL ON TABLE s_vmap.module TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.module TO vmap_user;
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ module_id de l''onglet vmap_admin_module', 'vmap_63');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ label de l''onglet vmap_admin_module', 'vmap_64');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ description de l''onglet vmap_admin_module', 'vmap_65');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_63', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_63', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_64', 'fr', 'Libellé');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_64', 'en', 'Label');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_65', 'fr', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_65', 'en', 'Description');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('module_id', true, true, 1,  100, 'right', 'vmap_63', 'vmap/modules', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_module'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('label', true, true, 2,  200, 'left', 'vmap_64', 'vmap/modules', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_module'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES  ('description', true, true, 3,  80, 'center', 'vmap_65', 'vmap/modules', '<div data-app-module-description-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_module'));
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Modèles" du mode "vmap_admin_template"', 'vmap_66');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_admin_template"', 'vmap_67');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_66', 'fr', 'Modèles');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_66', 'en', 'Templates');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_67', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_67', 'en', 'General');
				INSERT INTO s_vitis.vm_mode (mode_id, module_id) VALUES ('vmap_admin_print', 'vmap');
				INSERT INTO s_vitis.vm_mode_rolname (rolname, mode_id, "index") VALUES ('vmap_admin', 'vmap_admin_print', 50);
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_print', 'vmap_66', 'loadList()', 0, 'vmap/printtemplates', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_admin_template');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_67', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_template'), nextval('s_vitis.seq_vm'), 'vmap');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ printtemplate_id de l''onglet vmap_admin_template', 'vmap_68');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_admin_template', 'vmap_69');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_68', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_68', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_69', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_69', 'en', 'Name');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('printtemplate_id', true, true, 1,  30, 'right', 'vmap_68', 'vmap/printtemplates', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_template'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('name', true, true, 2,  200, 'left', 'vmap_69', 'vmap/printtemplates', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_template'));
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_admin_template', 'vmap_70');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_admin_template', 'vmap_71');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_70', 'fr', 'Ajouter un modèle');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_70', 'en', 'Add template');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_71', 'fr', 'Supprimer les modèles');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_71', 'en', 'Delete templates');
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ( 'add_smallFlexigrid', 'AddSectionForm', 'vmap_70', 'vmap/printtemplates', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_templates'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_71', 'vmap/printtemplates', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_templates'));
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Styles" du mode "vmap_admin_print"', 'vmap_72');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_admin_template"', 'vmap_73');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_72', 'fr', 'Styles');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_72', 'en', 'Styles');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_73', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_73', 'en', 'General');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_print', 'vmap_72', 'loadList()', 0, 'vmap/printstyles', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_admin_style');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_73', 'general', 2, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_style'), nextval('s_vitis.seq_vm'), 'vmap');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ printstyle_id de l''onglet vmap_admin_style', 'vmap_74');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_admin_style', 'vmap_75');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_74', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_74', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_75', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_75', 'en', 'Name');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('printstyle_id', true, true, 1,  30, 'right', 'vmap_74', 'vmap/printstyles', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_style'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('name', true, true, 2,  200, 'left', 'vmap_75', 'vmap/printstyles', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_style'));
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_admin_style', 'vmap_76');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_admin_style', 'vmap_77');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_76', 'fr', 'Ajouter un style');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_76', 'en', 'Add style');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_77', 'fr', 'Supprimer les styles');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_77', 'en', 'Delete styles');
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ( 'add_smallFlexigrid', 'AddSectionForm', 'vmap_76', 'vmap/printstyles', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_style'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_77', 'vmap/printstyles', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_style'));
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Section vmap de l''onglet vitis_users', 'vmap_78');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_78', 'fr', 'vMap');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_78', 'en', 'vMap');
				INSERT INTO s_vitis.vm_section (name, event, label_id, "index",  template, tab_id, section_id, ressource_id, module) VALUES ('vmap_user', 'loadVmapUser()', 'vmap_78', 2, 'simpleFormTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vitis_users'), nextval('s_vitis.seq_vm'), 'vmap/vmapusers', 'vmap');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Paramètres" du mode "vmap_admin_print"', 'vmap_79');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_admin_print_parameter"', 'vmap_80');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_79', 'fr', 'Paramètres');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_79', 'en', 'Parameters');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_80', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_80', 'en', 'General');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_admin_print', 'vmap_79', 'loadList()', 2, 'vmap/printparameters', 'editSectionForm', 'showSectionForm', 'name', 'ASC', 'vmap_admin_print_parameter');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_80', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'), nextval('s_vitis.seq_vm'), 'vmap');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_admin_print_parameter', 'vmap_81');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_admin_print_parameter', 'vmap_82');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_81', 'fr', 'Ajouter un paramètre');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_81', 'en', 'Add parameter');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_82', 'fr', 'Supprimer les paramètres');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_82', 'en', 'Delete parameters');
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ( 'add_smallFlexigrid', 'AddSectionForm', 'vmap_81', 'vmap/printparameters', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_print_parameter'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_82', 'vmap/printparameters', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_admin_print_parameter'));
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ printparameter_id de l''onglet vmap_admin_print_parameter', 'vmap_83');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ name de l''onglet vmap_admin_print_parameter', 'vmap_84');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_83', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_83', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_84', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_84', 'en', 'Name');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('printparameter_id', true, true, 1,  30, 'right', 'vmap_83', 'vmap/printparameters', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('name', true, true, 2,  200, 'left', 'vmap_84', 'vmap/printparameters', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'));
				CREATE OR REPLACE VIEW s_vmap.v_print_parameter AS SELECT printparameter.printparameter_id, printparameter.printtemplate_id, printparameter.name, printparameter.editable, printparameter.label, printparameter.placeholder, printparameter.defaultvalue, printtemplate.name AS print_template FROM s_vmap.printparameter LEFT JOIN s_vmap.printtemplate ON printparameter.printtemplate_id = printtemplate.printtemplate_id;
				ALTER TABLE s_vmap.v_print_parameter OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_print_parameter TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_print_parameter TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_print_parameter TO vmap_user;
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ label de l''onglet vmap_admin_print_parameter', 'vmap_85');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ print_template de l''onglet vmap_admin_print_parameter', 'vmap_86');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ placeholder de l''onglet vmap_admin_print_parameter', 'vmap_87');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ defaultvalue de l''onglet vmap_admin_print_parameter', 'vmap_88');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ editable de l''onglet vmap_admin_print_parameter', 'vmap_89');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_85', 'fr', 'Libellé');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_85', 'en', 'Label');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_86', 'fr', 'Modèle');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_86', 'en', 'Template');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_87', 'fr', 'Placeholder');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_87', 'en', 'Placeholder');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_88', 'fr', 'Valeur par défaut');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_88', 'en', 'Default value');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_89', 'fr', 'Modifiable');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_89', 'en', 'Editable');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('label', true, true, 3,  200, 'left', 'vmap_85', 'vmap/printparameters', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('print_template', true, true, 4,  200, 'left', 'vmap_86', 'vmap/printparameters', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES  ('placeholder', true, true, 4,  80, 'center', 'vmap_87', 'vmap/printparameters', '<div data-app-print-parameter-placeholder-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES  ('defaultvalue', true, true, 5,  110, 'center', 'vmap_88', 'vmap/printparameters', '<div data-app-print-parameter-default-value-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, template, tab_id) VALUES  ('editable', true, true, 6,  80, 'center', 'vmap_89', 'vmap/printparameters', '<div data-app-set-boolean-icon-column="{{row.entity[col.field]}}"></div>', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_print_parameter'));
				CREATE OR REPLACE VIEW s_vmap.v_template AS SELECT printtemplate.printtemplate_id, printtemplate.name, printtemplate.rt_format_id, printtemplate.rt_orientation_id, printtemplate.definition, printtemplate.outputformats_id, printtemplate.sql, printtemplate.ressource_id, printtemplate.business_object_id, business_object.title AS business_object FROM s_vmap.printtemplate LEFT JOIN s_vmap.business_object ON printtemplate.business_object_id = business_object.business_object_id;
				ALTER TABLE s_vmap.v_template OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_template TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_template TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_template TO vmap_user;
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ rt_format_id de l''onglet vmap_admin_template', 'vmap_90');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ rt_orientation_id de l''onglet vmap_admin_template', 'vmap_91');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ outputformats_id de l''onglet vmap_admin_template', 'vmap_92');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_90', 'fr', 'Format');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_90', 'en', 'Format');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_91', 'fr', 'Orientation');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_91', 'en', 'Orientation');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_92', 'fr', 'Format de sortie');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_92', 'en', 'Output format');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('rt_format_id', true, true, 3,  45, 'left', 'vmap_90', 'vmap/printtemplates', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_template'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('rt_orientation_id', true, true, 4,  65, 'left', 'vmap_91', 'vmap/printtemplates', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_template'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('outputformats_id', true, true, 5,  100, 'left', 'vmap_92', 'vmap/printtemplates', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_admin_template'));
				INSERT INTO s_vmap.rt_service_type (service_type_id) VALUES ('tilewms');
				INSERT INTO s_vmap.rt_service_type (service_type_id) VALUES ('imagewms');
				INSERT INTO s_vmap.rt_service_type (service_type_id) VALUES ('bing');
				INSERT INTO s_vmap.rt_service_type (service_type_id) VALUES ('osm');
				INSERT INTO s_vmap.rt_crs (crs_id, name) VALUES ('EPSG:2154', 'Lambert 93');
				INSERT INTO s_vmap.rt_crs (crs_id, name) VALUES ('EPSG:3857', 'WGS84 Spherical Mercator');
				INSERT INTO s_vmap.rt_crs (crs_id, name) VALUES ('EPSG:4326', 'Longitude Latitude');
				INSERT INTO s_vmap.layertheme (name, description) VALUES ('Géobretagne', 'services regroupant les couches géobretagne');
				INSERT INTO s_vmap.layertheme (name, description) VALUES ('Open Street Maps', 'services regroupant les couches open street map');
				INSERT INTO s_vmap.service (service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ('tilewms', 'Géobretagne', 'services regroupant les couches géobretagne', 'http://geobretagne.fr/geoserver/audelor/wms?service=wms', '', '1.3.0', NULL, NULL, NULL);
				INSERT INTO s_vmap.service (service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ('osm', 'Open Street Maps', 'services regroupant les couches osm', 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png', '', '1.3.0', 'images/imagettes/osm.png', NULL, NULL);
				INSERT INTO s_vmap.service ( service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ( 'osm', 'OpenSeaMap', 'Phares et autres éléments maritimes', 'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png', NULL, NULL, 'images/imagettes/seamap.png', NULL, NULL);
				INSERT INTO s_vmap.service (service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ('osm', 'OpenCycleMap', 'Used by hundreds of applications and websites from around the globe, OpenCycleMap is an award-winning global map for cycling.', 'http://tile.thunderforest.com/cycle/{z}/{x}/{y}.png', NULL, NULL, 'images/imagettes/opencyclemap.png', NULL, NULL);
				INSERT INTO s_vmap.service (service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ('osm', 'Transport', 'Recently chosen by OpenStreetMap for their front page, this map shows public transportation in great detail.', 'http://tile.thunderforest.com/transport/{z}/{x}/{y}.png', NULL, NULL, 'images/imagettes/transport-294.png', NULL, NULL);
				INSERT INTO s_vmap.service (service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ('osm', 'Landscape', 'A global style focused on information about the natural world - great for rural context.', 'http://tile.thunderforest.com/landscape/{z}/{x}/{y}.png', NULL, NULL, 'images/imagettes/landscape-294.png', NULL, NULL);
				INSERT INTO s_vmap.service (service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ('osm', 'Outdoors', 'For all the outdoor enthusiasts - hiking, skiing and other activities.', 'http://tile.thunderforest.com/outdoors/{z}/{x}/{y}.png', NULL, NULL, 'images/imagettes/outdoors-294.png', NULL, NULL);
				INSERT INTO s_vmap.service (service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ('osm', 'Transport Dark', 'A dark variant of the Transport map.', 'http://tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png', NULL, NULL, 'images/imagettes/transport-dark-294.png', NULL, NULL);
				INSERT INTO s_vmap.layer (layertheme_id, service_id, name, description, layer_list, crs_list, bo_id) VALUES ((SELECT layertheme_id FROM s_vmap.layertheme WHERE name = 'Géobretagne'), (SELECT service_id FROM s_vmap.service WHERE name = 'Géobretagne'), 'Liaisons vertes', 'Liaisons vertes de la région lorientaise', 'liaisons_vertes_audelor', 'EPSG:2154|CRS:84', NULL);
				INSERT INTO s_vmap.layer (layertheme_id, service_id, name, description, layer_list, crs_list, bo_id) VALUES ((SELECT layertheme_id FROM s_vmap.layertheme WHERE name = 'Géobretagne'), (SELECT service_id FROM s_vmap.service WHERE name = 'Géobretagne'), 'Terrains zone d''activités', 'Terrains (Zones d''Activités du Pays de Lorient)', 'za_terrain_audelor', 'EPSG:2154|CRS:84', NULL);
				INSERT INTO s_vmap.layer (layertheme_id, service_id, name, description, layer_list, crs_list, bo_id) VALUES ((SELECT layertheme_id FROM s_vmap.layertheme WHERE name = 'Géobretagne'), (SELECT service_id FROM s_vmap.service WHERE name = 'Géobretagne'), 'Zone d''activités audelor', 'Zones d''Activités du Pays de Lorient', 'zone_activite_audelor', 'EPSG:2154|CRS:84', NULL);
				INSERT INTO s_vmap.layer (layertheme_id, service_id, name, description, layer_list, crs_list, bo_id) VALUES ((SELECT layertheme_id FROM s_vmap.layertheme WHERE name = 'Open Street Maps'), (SELECT service_id FROM s_vmap.service WHERE name = 'Open Street Maps'), 'Open Street Maps', 'Fond osm', NULL, 'EPSG:3857', NULL);
				INSERT INTO s_vmap.maptheme (name, description) VALUES ('Thème Géobretagne', 'Cartes Géobretagne avec fond OSM');
				INSERT INTO s_vmap.map (crs_id, name, description, extent, catalog_index, thumbnail, maptheme_id) VALUES ('EPSG:2154', 'Carte OSM Géobretagne', 'Carte Geobretagne avec un fond osm', '176015|6730574|282342|6792233', 2, 'images/imagettes/osm.png', (SELECT maptheme_id FROM s_vmap.maptheme WHERE name = 'Thème Géobretagne'));
				INSERT INTO s_vmap.rt_format(rt_format_id) VALUES ('A4');
				INSERT INTO s_vmap.rt_format(rt_format_id) VALUES ('A3');
				INSERT INTO s_vmap.rt_format(rt_format_id) VALUES ('A2');
				INSERT INTO s_vmap.rt_format(rt_format_id) VALUES ('A1');
				INSERT INTO s_vitis."group" ("group_id", "name") VALUES ((SELECT nextval('s_vitis.seq_common'::regclass)), 'demo');
				INSERT INTO s_vmap.map_group (map_id, group_id) VALUES ((SELECT map_id FROM s_vmap.map WHERE name = 'Carte OSM Géobretagne'), (SELECT group_id FROM s_vitis.group WHERE name = 'demo'));				
				INSERT INTO s_vmap.map_layer (map_id, layer_id, layer_index, layer_visible, layer_opacity) VALUES ((SELECT map_id FROM s_vmap.map WHERE name = 'Carte OSM Géobretagne'), (SELECT layer_id FROM s_vmap.layer WHERE name = 'Open Street Maps'), 1, true, 100);
				INSERT INTO s_vmap.map_layer (map_id, layer_id, layer_index, layer_visible, layer_opacity) VALUES ((SELECT map_id FROM s_vmap.map WHERE name = 'Carte OSM Géobretagne'), (SELECT layer_id FROM s_vmap.layer WHERE name = 'Liaisons vertes'), 2, true, 100);
				INSERT INTO s_vmap.map_layer (map_id, layer_id, layer_index, layer_visible, layer_opacity) VALUES ((SELECT map_id FROM s_vmap.map WHERE name = 'Carte OSM Géobretagne'), (SELECT layer_id FROM s_vmap.layer WHERE name = 'Terrains zone d''activités'), 3, true, 100);
				INSERT INTO s_vmap.map_layer (map_id, layer_id, layer_index, layer_visible, layer_opacity) VALUES ((SELECT map_id FROM s_vmap.map WHERE name = 'Carte OSM Géobretagne'), (SELECT layer_id FROM s_vmap.layer WHERE name = 'Zone d''activités audelor'), 4, true, 100);
				INSERT INTO s_vmap.rt_orientation(rt_orientation_id) VALUES ('portrait');
				INSERT INTO s_vmap.rt_orientation(rt_orientation_id) VALUES ('paysage');
				INSERT INTO s_vmap.rt_outputformats(outputformats_id) VALUES ('pdf');                                     
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section vmap_config', 'vmap_95');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_95', 'fr', 'Configuration vMap');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_95', 'en', 'vMap config');
				INSERT INTO s_vitis.vm_mode_rolname (index, mode_id, rolname) VALUES (70, 'configuration', 'vmap_admin');
				INSERT INTO s_vitis.vm_section (section_id, label_id, name, index, event, tab_id, template, ressource_id, module) VALUES ((select nextval('s_vitis.seq_vm'::regclass)), 'vmap_95', 'vmapConfig', 7, 'loadVmapConfig()', (select tab_id from s_vitis.vm_tab where name = 'vitis_configuration'), 'simpleFormTpl.html', NULL, 'vmap');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Onglet "Evènements" du mode "vmap_business_object"', 'vmap_96');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Titre de la section "general" de l''onglet "vmap_business_object_event"', 'vmap_97');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_96', 'fr', 'Evènements');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_96', 'en', 'Events');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_97', 'fr', 'Général');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_97', 'en', 'General');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_business_object', 'vmap_96', 'loadList()', 2, 'vmap/businessobjectevents', 'editSectionForm', 'showSectionForm', 'event_id', 'ASC', 'vmap_business_object_event');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_97', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_event'), nextval('s_vitis.seq_vm'), 'vmap');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_business_object_event', 'vmap_98');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button de suppression de l''onglet vmap_business_object_event', 'vmap_99');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_98', 'fr', 'Ajouter un évènement');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_98', 'en', 'Add event');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_99', 'fr', 'Supprimer les évènements');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_99', 'en', 'Delete events');
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ( 'add_smallFlexigrid', 'AddSectionForm', 'vmap_98', 'vmap/businessobjectevents', (select tab_id from s_vitis.vm_tab where name = 'vmap_business_object_event'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_99', 'vmap/businessobjectevents', (select tab_id from s_vitis.vm_tab where name = 'vmap_business_object_event'));
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ event_id de l''onglet vmap_business_object_event', 'vmap_100');
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ description de l''onglet vmap_business_object_event', 'vmap_101');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_100', 'fr', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_100', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_101', 'fr', 'Description');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_101', 'en', 'Description');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES  ('event_id', true, true, 1,  150, 'right', 'vmap_83', 'vmap/businessobjectevents', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_event'));
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id, template) VALUES  ('description', true, true, 2,  80, 'left', 'vmap_101', 'vmap/businessobjectevents', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_event'), '<div data-app-business-object-event-description-column="{{row.entity[col.field]}}"></div>');
				INSERT INTO s_vmap.printtemplate (name, rt_format_id, rt_orientation_id, definition, outputformats_id, sql, ressource_id, business_object_id) VALUES ('Modèle par défaut', 'A4', 'portrait', '<style>' || chr(13) || '    #A4_print_template {' || chr(13) || '        text-align: center;' || chr(13) || '        width: 21cm;' || chr(13) || '    }' || chr(13) || '    #map_legend {' || chr(13) || '        margin-left: 25px;' || chr(13) || '        text-align: left;' || chr(13) || '    }' || chr(13) || '    #map_image {' || chr(13) || '        background-color: #DFDFDF;' || chr(13) || '        height: 19cm;' || chr(13) || '        width: 14cm;' || chr(13) || '    }' || chr(13) || '    #map_overview {' || chr(13) || '        background-color: #DFDFDF;' || chr(13) || '        /* 4cm conseillé */' || chr(13) || '        height: 4cm;' || chr(13) || '        width: 4cm;' || chr(13) || '    }' || chr(13) || '    .map_image_container {' || chr(13) || '        /*margin: 25px 0px;*/' || chr(13) || '    }' || chr(13) || '    .absolute {' || chr(13) || '        position: absolute;' || chr(13) || '    }' || chr(13) || '' || chr(13) || '    #img1 {' || chr(13) || '        height: 1cm;' || chr(13) || '    }' || chr(13) || '</style>' || chr(13) || '<!-- A4 print Template -->' || chr(13) || '<div id="A4_print_template">' || chr(13) || '    <br>' || chr(13) || '    <br>' || chr(13) || '    <!--Logos-->' || chr(13) || '    <div class="row">' || chr(13) || '        <div class="col-sm-4"><img id="img1" src="images/logo-veremes.jpg"></div>' || chr(13) || '        <div class="col-sm-4">' || chr(13) || '            <h1 style="margin-bottom: 0px; padding-bottom: 0px;">{{title}}</h1></div>' || chr(13) || '        <div class="col-sm-4"><img id="img1" src="images/logo_departement_herault.jpg"></div>' || chr(13) || '    </div>' || chr(13) || '    <div>' || chr(13) || '        <i>{{headline}}</i>' || chr(13) || '    </div>' || chr(13) || '    <!--Carte-->' || chr(13) || '    <div style="margin: 25px 0px">' || chr(13) || '        <div class="row">' || chr(13) || '            <div class="col-sm-3">' || chr(13) || '                <!--Pour afficher la légende, donner à la div id="map_legend"-->' || chr(13) || '                <div id="map_legend"></div>' || chr(13) || '            </div>' || chr(13) || '            <div class="col-sm-9">' || chr(13) || '                <div class="map_image_container">' || chr(13) || '                    <!--Pour afficher la carte, donner à la div id="map_image"-->' || chr(13) || '                    <img id="map_image" src="images/transparent.png">' || chr(13) || '                </div>' || chr(13) || '            </div>' || chr(13) || '        </div>' || chr(13) || '    </div>' || chr(13) || '    <div class="row">' || chr(13) || '' || chr(13) || '        <!--On peut afficher l''overview en utilisant id="map_overview-->' || chr(13) || '        <div class="col-sm-4">' || chr(13) || '            <img id="map_overview">' || chr(13) || '        </div>' || chr(13) || '        <div class="col-sm-4">' || chr(13) || '            <br>' || chr(13) || '            <br>' || chr(13) || '            <br>' || chr(13) || '            <br>' || chr(13) || '            <label>{{footer}}</label>' || chr(13) || '        </div>' || chr(13) || '' || chr(13) || '        <!--On peut afficher l''échelle actuelle en utilisant {{map_scale}}-->' || chr(13) || '        <div class="col-sm-4">' || chr(13) || '            <br>' || chr(13) || '            <br>' || chr(13) || '            <br>' || chr(13) || '            <br>' || chr(13) || '            <label>Echelle: {{map_scale}}</label><br>' || chr(13) || '        </div>' || chr(13) || '    </div>' || chr(13) || '    <br>' || chr(13) || '</div>', 'pdf', NULL, NULL, NULL);
				INSERT INTO s_vmap.printparameter (printtemplate_id, name, editable, label, placeholder, defaultvalue) VALUES ((select printtemplate_id from s_vmap.printtemplate where name = 'Modèle par défaut'), 'title', true, 'Titre', 'Titre du document', NULL);
				INSERT INTO s_vmap.printparameter (printtemplate_id, name, editable, label, placeholder, defaultvalue) VALUES ((select printtemplate_id from s_vmap.printtemplate where name = 'Modèle par défaut'), 'footer', false, NULL, NULL, 'Tout droits réservés');
				INSERT INTO s_vmap.printparameter (printtemplate_id, name, editable, label, placeholder, defaultvalue) VALUES ((select printtemplate_id from s_vmap.printtemplate where name = 'Modèle par défaut'), 'headline', true, 'Sous titre', 'Sous titre de la carte', NULL);
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Formulaire de filtre', 'vmap_102');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_102', 'fr', 'Formulaire de filtre');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_102', 'en', 'Layer filter');
				INSERT INTO s_vitis.vm_section (section_id, label_id, name, index, event, tab_id, template, ressource_id, module) VALUES ((select nextval('s_vitis.seq_vm'::regclass)), 'vmap_102', 'studio', 4, 'loadStudioVmap(''layer_filter'')', (select tab_id from s_vitis.vm_tab where name = 'vmap_layers'), 'modules/vmap/template/studio.html', NULL, 'vmap');
				CREATE OR REPLACE VIEW s_vmap.v_user_printstyle AS SELECT * FROM s_vmap.printstyle where printstyle_id = (SELECT printstyle_id FROM s_vmap.user_printstyle where user_id = (SELECT user_id FROM s_vitis.user where login = current_user));
				ALTER TABLE s_vmap.v_user_printstyle  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_user_printstyle TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_user_printstyle TO vmap_user;
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2016.01.01</version>
			<code>
				<![CDATA[
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2016.02.00</version>
			<code>
				<![CDATA[
				DELETE FROM s_vmap.rt_format WHERE rt_format_id='A1';
				DELETE FROM s_vmap.rt_format WHERE rt_format_id='A2';
				UPDATE s_vmap.printtemplate SET definition='<style>' || chr(13) || '    #A4_print_template {' || chr(13) || '        width: 21cm;' || chr(13) || '        font-family: arial;' || chr(13) || '        position: absolute;' || chr(13) || '    }' || chr(13) || '    #map_legend{' || chr(13) || '        width: 3cm; ' || chr(13) || '        margin-top: 16px;' || chr(13) || '    }' || chr(13) || '    #map_image {' || chr(13) || '        background-color: #D8D8D8 !important;' || chr(13) || '        height: 22cm;' || chr(13) || '        width: 14cm;' || chr(13) || '        border: 1px solid black;' || chr(13) || '    }' || chr(13) || '    #map_overview {' || chr(13) || '        background-color: #D8D8D8 !important;' || chr(13) || '        height: 4cm;' || chr(13) || '        width: 4cm;' || chr(13) || '        border: 1px solid black;' || chr(13) || '    }' || chr(13) || '    .color_blue{' || chr(13) || '        color: #424A96 !important;' || chr(13) || '    }' || chr(13) || '    .logo {' || chr(13) || '        height: 2cm;' || chr(13) || '    }' || chr(13) || '    .container {' || chr(13) || '        position: absolute;' || chr(13) || '    }' || chr(13) || '    #header_container{' || chr(13) || '        width: 18cm;' || chr(13) || '        height: 2.5cm;' || chr(13) || '        background-color: #D8D8D8 !important;' || chr(13) || '    }' || chr(13) || '    #footer_container{' || chr(13) || '        width: 18cm;' || chr(13) || '        height: 1cm;' || chr(13) || '        background-color: #D8D8D8 !important;' || chr(13) || '    }' || chr(13) || '    .header_content{' || chr(13) || '        margin-left: 10px;' || chr(13) || '    }' || chr(13) || '    .title{' || chr(13) || '        display: block;' || chr(13) || '        font-size: 24pt;' || chr(13) || '        font-weight: bold;' || chr(13) || '        margin-top: 0.8em;' || chr(13) || '    }' || chr(13) || '    .headline{' || chr(13) || '        font-weight: bold;' || chr(13) || '        font-size: 14pt;' || chr(13) || '    }' || chr(13) || '    .legend_headline{' || chr(13) || '        font-weight: bold;' || chr(13) || '        font-size: 14pt;' || chr(13) || '        color: black;' || chr(13) || '    }' || chr(13) || '    .footer_text{' || chr(13) || '        font-weight: bold;' || chr(13) || '        font-size: 10pt;' || chr(13) || '        margin: 0.3cm;' || chr(13) || '    }' || chr(13) || '' || chr(13) || '</style>' || chr(13) || '<div id="A4_print_template">' || chr(13) || '' || chr(13) || '    <div id="header_container" class="container" style="top: 1.2cm; left: 1.5cm;">' || chr(13) || '        <div class="container" style="top: -0.5cm; left: 0cm;">' || chr(13) || '            <div class="header_content title color_blue">{{title}}</div>' || chr(13) || '            <div class="header_content headline color_blue">{{headline}}</div>' || chr(13) || '        </div>' || chr(13) || '        <div class="container" style="top: 0.2cm; right: 10px;">' || chr(13) || '            <img class="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABvCAMAAAC0A0wQAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4AoaDB4SgWapiwAAAIpQTFRF5z+B61+W7W+h73+r8Y+285/A9a/L97/V+c/g+9/q/e/1////97/V9a/L97/V9a/L8Y+29a/L97/V9a/L3wBY3wFZ3wJZ4Ahe4Ale4Q9i4RNl4hVm4x9s4yBt4yNv5CZx5Clz5S935TN65z+B50CC6U+M6VOO6lmS61+W7Gic7W+h73+r8Y+285/AbLUkSgAAABR0Uk5TAAAAAAAAAAAAAAAAEBgrYIaUqrbZfjuKAAAE00lEQVRo3u2abZOcKBCAzW02y4vnxR1390jM5Tzihgj+/78XeRXUUUSn6j4MVVtxBB+bpulu2mTYaw/VRuvkKLY+ZsRle9gEDYNEdRM2H8bA6jZsKTa9DZvFiL2HTapa/dNWVTkM6cxddpjd5zlmpVw9zrVKiJ4BvK6bWLbQ93tOAa/ocAWqYRoUSL23nHN6RO6xjyvjFlWNkPoNsX5VApt0cvalz5aTYNwfj/s6hc0x4sLv41UuNYFw2HgCm+EZRGq5xngLvs2GU0apHqIz9sxgNtlz+XL5EOzmbEj2sfkckUuR84UODMguNpoTkGKXC2wM6x1sukRopXmDw3IvzRwL8zd/6S5953hPY5TsYCO8rwWmssHGexuksWyK97feKWadXZcJ8DzWvvfDR0PcYne72XXsWop0jWyxSb6bjWgkmyUsZaS+a4SPwNflTmDDro6SmyawQeRapuwcXNIodspSeqnzKrtpU9iwi1pLniS4TUM39g4+opWNvdMlsXPeRLAnqxlpkyjvInxVGM1BVKwANCVesqsGj+BCtN+Tn0C6EoMFBvIFPW9JCpuueNy+ajtCOOBpeVW+qu2S7M2/PRyq8/jUJIZd+0lTdDCLjMUmYKKu3Mrf9rO14KipyKZtk/1nkuH0J5qYtDPhvCNaZQIRKZZIOLuSmFSlO1IrQDdkE7SeG5MjNY48Mg1MYUPBr4gOOTymEyU6vJIDEi6OspvlGJfTM+pVbaSbSqqFLSvlFLmXUi3Iy7NqeJR19bVT3xn1QYCdsSNxcu2xa6pVTR+qmaqdRCnj1S3YEe3O/l+wi4cT2hX2ye3OvrOT2Q+zfWBDY3Ee2x4G3RejE9nCnZnOZ9vkgd2AbcNvcwO2SUxQlcb+Vz5yCQ4Bf5h6m/swdZGJW8guHgeX93H+Kjjc/9OkSpmivduub0pYU1tyxVNuflk24i5daw1e99oSZKvomZrvm29r/xmdyLc2LmXoRzZqZt+QNfviOkiv9P3uKUW8Kj1oNnBnEjWZkT3JTgrHJuHdTCnTKuWrnAMybGwfLFSdqfJ/yjv2PNI6tt9qZSdfnHxK0p/WTpR83CxwO7K15i+u4kg8Nv309EjtCXVg/3q1BqGugGNzUzZo1Tscm467ijmv41foWjOdzCzgD3lTzuAfZ99aW+bAVIxsFXGBLlKEbLPVkFaW2juNUYqc4ms/spF2V1A/P9k7oBCsrkI2D1wEzIwneh3c0i+9ko6tBBaquwnYUNBpRqIungz7sx4r2ehtuPqO8d/WYCybKbV12ohHdr/wVTFgP41sbeLw4h627F7psNFW4di9d4DbZkuLfRHyDV+xzwZuC8GRbVaKimeEn5fZOj8H2g9KA/n2prXusVUoY8YALPsvr6QlQvbnoFZofCx/CcoOjk29GGHZD1606xZtULuHxrBtPHzHIZt7sS1kI9+Q3d5h3veYzsaGH4Hrd+zCc0chW5ryczOxk0Fy9uljbcNK5gfbL3jCRlMrKzxX1cxscHLctTFNmvgLn7JNoKQ+GzfTuhOwvV5Pg0b2T//YPrLZuJcde/wExfS8Mtfb+OjlWPyYyaYipbpSy6CulHlA/cZ6cD0f7EgT09T/0KhqcSAfREVRhLWJcVZjz1m55lKGcWff2bNStWyTktlvZmREwIT2iEIAAAAASUVORK5CYII=">' || chr(13) || '        </div>' || chr(13) || '    </div>' || chr(13) || '' || chr(13) || '    <div class="container" style="top: 5cm; left: 1.5cm;">' || chr(13) || '        <label class="legend_headline">Légende</label>' || chr(13) || '        <!--Pour afficher la légende, utiliser id="map_legend"-->' || chr(13) || '        <div id="map_legend"></div>' || chr(13) || '    </div>' || chr(13) || '    <div class="container" style="top: 4cm; right: 1.1cm;">' || chr(13) || '        <!--Pour afficher la carte, utiliser id="map_image"-->' || chr(13) || '        <img id="map_image" src="images/transparent.png">' || chr(13) || '    </div>' || chr(13) || '' || chr(13) || '    <div class="container" style="top: 24.5cm; left: 1.7cm; z-index: 9;">' || chr(13) || '        <!-- Pour afficher l''overview utiliser id="map_overview-->' || chr(13) || '        <img id="map_overview">' || chr(13) || '    </div>' || chr(13) || '' || chr(13) || '' || chr(13) || '    <div id="footer_container" class="container" style="top: 26.7cm; left: 1.5cm">' || chr(13) || '        <div class="container" style="top: 0cm; right: 0cm;">' || chr(13) || '            <div class="footer_text">' || chr(13) || '                <label class="color_blue">Source(s):</label>' || chr(13) || '                ' || chr(13) || '                <label class="color_blue">{{sources}}</label>' || chr(13) || '            </div>' || chr(13) || '        </div>' || chr(13) || '        <div class="container" style="top: 0cm; left: 5.5cm;">' || chr(13) || '            <!-- Pour afficher l''échelle actuelle utiliser {{map_scale}}-->' || chr(13) || '            <div class="footer_text">' || chr(13) || '                <label class="color_blue"></label>' || chr(13) || '                ' || chr(13) || '                <label class="color_blue">Echelle: {{map_scale}}</label>' || chr(13) || '            </div>' || chr(13) || '        </div>' || chr(13) || '    </div>' || chr(13) || '</div>' WHERE name='Modèle par défaut';
				INSERT INTO s_vmap.printparameter (printtemplate_id, name, editable, label, placeholder, defaultvalue) VALUES ((select printtemplate_id from s_vmap.printtemplate where name = 'Modèle par défaut'), 'sources', true, 'Sources', 'Sources la carte', NULL);
				UPDATE s_vitis.vm_translation SET translation='Éditable' WHERE translation='Modifiable';
				CREATE OR REPLACE VIEW s_vmap.v_user_template AS  SELECT DISTINCT printtemplate.printtemplate_id,    printtemplate.name,    printtemplate.rt_format_id,    printtemplate.rt_orientation_id,    printtemplate.definition,    printtemplate.outputformats_id,    printtemplate.sql,    printtemplate.ressource_id,    printtemplate.business_object_id,    business_object.title AS business_object, group_id   FROM s_vmap.printtemplate   LEFT JOIN s_vmap.printtemplate_group on printtemplate.printtemplate_id = printtemplate_group.printtemplate_id   LEFT JOIN s_vmap.business_object ON printtemplate.business_object_id::text = business_object.business_object_id::text;
				ALTER TABLE s_vmap.v_user_template  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_user_template TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_user_template TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_user_template TO vmap_user;
				-- PrintReport
				CREATE TABLE s_vmap.printreport (printreport_id  SERIAL NOT NULL, name varchar(100) NOT NULL UNIQUE, rt_format_id varchar(2) NOT NULL, rt_orientation_id varchar(8) NOT NULL, outputformats_id varchar(255) NOT NULL, business_object_id varchar(100) NOT NULL, htmldefinition text NOT NULL, jsonobjects text NOT NULL, multiobject bool NOT NULL, PRIMARY KEY (printreport_id));
				ALTER TABLE s_vmap.printreport ADD CONSTRAINT fk_printreport_rt_format FOREIGN KEY (rt_format_id) REFERENCES s_vmap.rt_format (rt_format_id);
				ALTER TABLE s_vmap.printreport ADD CONSTRAINT fk_printreport_rt_orientation FOREIGN KEY (rt_orientation_id) REFERENCES s_vmap.rt_orientation (rt_orientation_id);
				ALTER TABLE s_vmap.printreport ADD CONSTRAINT fk_printreport_rt_outputformats FOREIGN KEY (outputformats_id) REFERENCES s_vmap.rt_outputformats (outputformats_id);
				ALTER TABLE s_vmap.printreport ADD CONSTRAINT fk_printreport_business_object FOREIGN KEY (business_object_id) REFERENCES s_vmap.business_object (business_object_id);
				ALTER TABLE s_vmap.printreport  OWNER TO u_vitis;
				GRANT ALL ON TABLE s_vmap.printreport TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.printreport TO vmap_user;
				CREATE VIEW s_vmap.v_printreport AS SELECT s_vmap.printreport.printreport_id, s_vmap.printreport.name, s_vmap.printreport.rt_format_id, s_vmap.printreport.rt_orientation_id, s_vmap.printreport.outputformats_id, s_vmap.printreport.business_object_id, s_vmap.printreport.htmldefinition, s_vmap.printreport.jsonobjects, s_vmap.printreport.multiobject, s_vmap.business_object.title AS business_object_title, s_vmap.business_object.id_field AS business_object_id_field, s_vmap.business_object."database" AS business_object_database, s_vmap.business_object."schema" AS business_object_schema, s_vmap.business_object."table" AS business_object_table, s_vmap.business_object.geom_column AS business_object_geom_column FROM s_vmap.business_object INNER JOIN s_vmap.printreport ON s_vmap.business_object.business_object_id = s_vmap.printreport.business_object_id INNER JOIN s_vmap.rt_orientation ON s_vmap.printreport.rt_orientation_id = s_vmap.rt_orientation.rt_orientation_id INNER JOIN s_vmap.rt_format ON s_vmap.printreport.rt_format_id = s_vmap.rt_format.rt_format_id INNER JOIN s_vmap.rt_outputformats ON s_vmap.printreport.outputformats_id = s_vmap.rt_outputformats.outputformats_id;
				GRANT ALL ON TABLE s_vmap.v_printreport TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_printreport TO vmap_user;
				INSERT INTO s_vmap.rt_outputformats(outputformats_id) VALUES ('doc');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Rapports', 'vmap_103');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_103', 'en', 'Reports');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_103', 'fr', 'Rapports');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('ID', 'vmap_104');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_104', 'en', 'ID');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_104', 'fr', 'ID');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Format', 'vmap_105');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_105', 'en', 'Format');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_105', 'fr', 'Format');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Orientation', 'vmap_106');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_106', 'en', 'Orientation');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_106', 'fr', 'Orientation');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Format de sortie', 'vmap_107');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_107', 'en', 'Output format');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_107', 'fr', 'Format de sortie');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Objet métier', 'vmap_108');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_108', 'en', 'Business object');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_108', 'fr', 'Objet métier');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Rapport', 'vmap_109');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_109', 'en', 'Report');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_109', 'fr', 'Rapport');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Add', 'vmap_110');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_110', 'en', 'Add report');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_110', 'fr', 'Ajouter un rapport');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Delete', 'vmap_111');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_111', 'en', 'Delete reports');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_111', 'fr', 'Supprimer les rapports');
				INSERT INTO s_vitis.vm_string(string, string_id) VALUES ('Name', 'vmap_112');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_112', 'en', 'Name');
				INSERT INTO s_vitis.vm_translation(translation_id, lang, translation) VALUES ('vmap_112', 'fr', 'Nom');
				INSERT INTO s_vitis.vm_tab (mode_id, label_id, event, "index", ressource_id, edit_column, show_column, sorted_by, sorted_dir, name) VALUES ('vmap_business_object', 'vmap_103', 'loadList()', 1, 'vmap/printreports', 'editSectionForm', 'showSectionForm', 'printreport_id', 'ASC', 'vmap_business_object_printreport');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('printreport_id', 'TRUE', 'TRUE', 2, 124, 'left', 'vmap_104', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_printreport'), 'vmap/printreports');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('name', 'TRUE', 'TRUE', 3, 124, 'left', 'vmap_112', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_printreport'), 'vmap/printreports');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('rt_format_id', 'TRUE', 'TRUE', 4, 124, 'left', 'vmap_105', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_printreport'), 'vmap/printreports');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('rt_orientation_id', 'TRUE', 'TRUE', 5, 124, 'left', 'vmap_106', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_printreport'), 'vmap/printreports');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('outputformats_id', 'TRUE', 'TRUE', 6, 124, 'left', 'vmap_107', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_printreport'), 'vmap/printreports');
				INSERT INTO s_vitis.vm_table_field(name, sortable, resizeable, index, width, align, label_id, tab_id, ressource_id) VALUES ('business_object_title', 'TRUE', 'TRUE', 7, 124, 'left', 'vmap_108', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_printreport'), 'vmap/printreports');
				INSERT INTO s_vitis.vm_section (label_id, name, index, event, template, tab_id, section_id, module) VALUES ('vmap_109', 'general', 1, '', 'workspaceListTpl.html', (SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_business_object_printreport'), nextval('s_vitis.seq_vm'), 'vmap');
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ( 'add_smallFlexigrid', 'AddSectionForm', 'vmap_110', 'vmap/printreports', (select tab_id from s_vitis.vm_tab where name = 'vmap_business_object_printreport'));
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('deleteFlexigrid', 'DeleteSelection', 'vmap_111', 'vmap/printreports', (select tab_id from s_vitis.vm_tab where name = 'vmap_business_object_printreport'));
				-- Fin PrintReport
				INSERT INTO s_vitis."group" (group_id, name) VALUES ((SELECT nextval('s_vitis.seq_common')), 'Cadastre');
				INSERT INTO s_vmap.layertheme (layertheme_id, name, description) VALUES ((SELECT nextval('s_vmap.seq_common')), 'Cadastre', NULL);
				INSERT INTO s_vmap.maptheme (maptheme_id, name, description) VALUES ((SELECT nextval('s_vmap.seq_common')), 'Cadastre', NULL);
				INSERT INTO s_vmap.service (service_id, service_type_id, name, description, url, key, service_type_version, thumbnail, lang, imagery) VALUES ((SELECT nextval('s_vmap.seq_common')), 'tilewms', 'Veremap', 'Cartes WMS Réseau électrique Mandelieu', 'http://[veremap_serveur]/cgi-bin/wmsmap?service=wms', NULL, '1.3.0', NULL, NULL, NULL);
				INSERT INTO s_vmap.layer (layer_id, layertheme_id, service_id, name, description, layer_list, crs_list, bo_id, is_dynamic, is_filtered) VALUES ((SELECT nextval('s_vmap.seq_common')), (select layertheme_id from s_vmap.layertheme where name= 'Cadastre'), (select service_id from s_vmap.service where name= 'Veremap'), 'Cadastre', 'Ensemble des couches cadastrales fournies par défaut lors de l''installation du module cadastre de Veremap :' || chr(13) || '- Cadastre_batiment' || chr(13) || '- Cadastre_commune' || chr(13) || '- Cadastre_habillage_surfacique' || chr(13) || '- Cadastre_lieu_dit' || chr(13) || '- Cadastre_parcelle_text' || chr(13) || '- Cadastre_parcelle' || chr(13) || '- Cadastre_section', 'Cadastre_communes_vitis,Cadastre_parcelles_vitis,Cadastre_habillage_surfaciques_vitis,Cadastre_batiments_vitis,Cadastre_parcelle_texts_vitis,Cadastre_lieu_dits_vitis,Cadastre_sections_vitis', 'EPSG:2154', NULL, false, false);
				INSERT INTO s_vmap.map (map_id, crs_id, name, description, extent, catalog_index, thumbnail, maptheme_id) VALUES (-1, 'EPSG:2154', 'Cadastre', 'Carte contenant le calque "Cadastre" et OSM', '-707041|6173507|2094580|7169553', NULL, 'images/imagettes/cadastre.jpg', (select maptheme_id from s_vmap.maptheme where name= 'Cadastre'));
				INSERT INTO s_vmap.map_group (map_id, group_id) VALUES (-1, (select group_id from s_vitis."group" where name= 'Cadastre'));
				INSERT INTO s_vmap.map_layer (map_id, layer_id, layer_index, layer_visible, layer_opacity) VALUES (-1, (select layer_id from s_vmap.layer where name= 'Cadastre'), 2, true, 100);
				INSERT INTO s_vmap.map_layer (map_id, layer_id, layer_index, layer_visible, layer_opacity) VALUES (-1, (select layer_id from s_vmap.layer where name= 'Open Street Maps'), 1, true, 100);
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2016.03.00</version>
			<code>
				<![CDATA[
				ALTER TABLE s_vmap.business_object ADD COLUMN index integer;
				UPDATE s_vmap.service SET thumbnail='osm.png' WHERE thumbnail='images/imagettes/osm.png';
				UPDATE s_vmap.service SET thumbnail='seamap.png' WHERE thumbnail='images/imagettes/seamap.png';
				UPDATE s_vmap.service SET thumbnail='opencyclemap.png' WHERE thumbnail='images/imagettes/opencyclemap.png';
				UPDATE s_vmap.service SET thumbnail='transport-294.png' WHERE thumbnail='images/imagettes/transport-294.png';
				UPDATE s_vmap.service SET thumbnail='landscape-294.png' WHERE thumbnail='images/imagettes/landscape-294.png';
				UPDATE s_vmap.service SET thumbnail='outdoors-294.png' WHERE thumbnail='images/imagettes/outdoors-294.png';
				UPDATE s_vmap.service SET thumbnail='transport-dark-294.png' WHERE thumbnail='images/imagettes/transport-dark-294.png';
				UPDATE s_vmap.map SET thumbnail='geobret.png' WHERE thumbnail='images/imagettes/osm.png';
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2016.03.01</version>
			<code>
				<![CDATA[
				-- Utilisation du composant DocumentViewer (Vitis) pour l'apperçu des images dans les listes
				UPDATE s_vitis.vm_table_field SET template='<div data-app-document-viewer data-path="signaletique/pictures" data-file="{{::row.entity[col.field]}}" data-max-popover="200" data-img-class="" data-popover-class="" ></div>' WHERE template='<div data-app-map-thumbnail-column="{{row.entity[col.field]}}"></div>';
				UPDATE s_vitis.vm_table_field SET template='<div data-app-document-viewer data-path="signaletique/pictures" data-file="{{::row.entity[col.field]}}" data-max-popover="200" data-img-class="" data-popover-class="" ></div>' WHERE template='<div data-app-service-thumbnail-column="{{row.entity[col.field]}}"></div>';
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2017.01.00</version>
			<code>
				<![CDATA[
				INSERT INTO s_vmap.rt_service_type(service_type_id) VALUES ('wmts');
				ALTER TABLE s_vmap.service ADD COLUMN service_type_type varchar(30);
				ALTER TABLE s_vmap.service ADD COLUMN service_options text;
				ALTER TABLE s_vmap.layer ADD COLUMN matrix_set varchar(255);
				ALTER TABLE s_vmap.layer ADD COLUMN layer_style varchar(255);
				ALTER TABLE s_vmap.layer ADD COLUMN layer_format varchar(30);
				ALTER TABLE s_vmap.layer ADD COLUMN layer_options text;
				CREATE OR REPLACE VIEW s_vmap.v_layer AS SELECT s_vmap.layertheme.name AS theme_name, s_vmap.service.name AS service_name, s_vmap.service.service_type_id, s_vmap.service.url AS service_url, s_vmap.service."key" AS service_key, s_vmap.service.service_type_version, s_vmap.service.thumbnail AS service_thumbnail, s_vmap.service.lang AS service_lang, s_vmap.service.imagery AS service_imagery, s_vmap.business_object.title AS bo_title, s_vmap.business_object.id_field AS bo_id_field, s_vmap.business_object."database" AS bo_database, s_vmap.business_object."schema" AS bo_schema, s_vmap.business_object."table" AS bo_table, s_vmap.business_object.sql_summary AS bo_sql_summary, s_vmap.business_object.sql_list AS bo_sql_list, s_vmap.business_object.sorted_by AS bo_sorted_by, s_vmap.business_object.geom_column AS bo_geom_column, s_vmap.business_object.search_field AS bo_search_field, s_vmap.business_object.result_field AS bo_result_field, s_vmap.business_object.search_use_strict AS bo_search_use_strict, s_vmap.layer.layer_id, s_vmap.layer.layertheme_id, s_vmap.layer.service_id, s_vmap.layer.name, s_vmap.layer.description, s_vmap.layer.layer_list, s_vmap.layer.crs_list, s_vmap.layer.bo_id, s_vmap.layer.is_dynamic, s_vmap.layer.is_filtered, s_vmap.layer.matrix_set, s_vmap.layer.layer_style, s_vmap.layer.layer_format, s_vmap.layer.layer_options, s_vmap.service.service_type_type, s_vmap.service.service_options FROM s_vmap.layer LEFT JOIN s_vmap.business_object ON s_vmap.layer.bo_id = s_vmap.business_object.business_object_id LEFT JOIN s_vmap.layertheme ON s_vmap.layer.layertheme_id = s_vmap.layertheme.layertheme_id INNER JOIN s_vmap.service ON s_vmap.layer.service_id = s_vmap.service.service_id;
				GRANT ALL ON TABLE s_vmap.v_layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_layer TO vmap_user;
				INSERT INTO s_vmap.rt_service_type(service_type_id) VALUES ('xyz');
				CREATE OR REPLACE VIEW s_vmap.v_map_layer AS SELECT v_layer.layer_id,v_layer.name,v_layer.theme_name,map_layer.layer_visible,map_layer.map_id,map_layer.layer_index,map_layer.layer_opacity,v_layer.layertheme_id,v_layer.service_id FROM s_vmap.v_layer,s_vmap.map_layer WHERE v_layer.layer_id=map_layer.layer_id;
				GRANT ALL ON TABLE s_vmap.v_map_layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_map_layer TO vmap_user;
				GRANT ALL ON TABLE s_vmap.v_map_layer TO u_vitis;
				GRANT ALL ON TABLE s_vmap.v_map_layer TO vmap_admin;
				GRANT SELECT ON TABLE s_vmap.v_map_layer TO vmap_user;
				ALTER TABLE s_vmap.v_map_layer  OWNER TO u_vitis;
				-- Couche -> calque
				UPDATE s_vitis.vm_string SET string = 'Onglet "Calques" du mode "vmap"' WHERE string_id = 'vmap_4';
				UPDATE s_vitis.vm_string SET string = 'Titre de la section "calques de la carte" de l''onglet "vmap_map"' WHERE string_id = 'vmap_35';
				UPDATE s_vitis.vm_string SET string = 'Onglet "Thèmes des calques" du mode "vmap"' WHERE string_id = 'vmap_36';
				UPDATE s_vitis.vm_translation SET translation = 'Calques' WHERE translation_id = 'vmap_4' AND lang = 'fr';
				UPDATE s_vitis.vm_translation SET translation = 'Ajouter un calque' WHERE translation_id = 'vmap_26' AND lang = 'fr';
				UPDATE s_vitis.vm_translation SET translation = 'Supprimer les calques' WHERE translation_id = 'vmap_27' AND lang = 'fr';
				UPDATE s_vitis.vm_translation SET translation = 'Calques de la carte' WHERE translation_id = 'vmap_35' AND lang = 'fr';
				UPDATE s_vitis.vm_translation SET translation = 'Thèmes des calques' WHERE translation_id = 'vmap_36' AND lang = 'fr';
				-- Armand le 30/01/2017 à 10:39
				ALTER TABLE s_vmap.business_object ADD COLUMN add_form_size integer;
				ALTER TABLE s_vmap.business_object ADD COLUMN edit_form_size integer;
				ALTER TABLE s_vmap.business_object ADD COLUMN display_form_size integer;
				UPDATE s_vmap.business_object SET add_form_size=1;
				UPDATE s_vmap.business_object SET edit_form_size=1;
				UPDATE s_vmap.business_object SET display_form_size=1;
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2017.02.00</version>
			<code>
				<![CDATA[
				-- Armand le 01/03/2017
				ALTER TABLE s_vmap.service ADD COLUMN service_vm4ms boolean;
				-- Armand le 15/02/2017 à 17:31: ajout du bouton importer
				UPDATE s_vitis.vm_table_field SET align='left', width=300 WHERE table_field_id=147;
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Button d''ajout de l''onglet vmap_map', 'vmap_113');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_113', 'fr', 'Importer');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_113', 'en', 'Import');
				INSERT INTO s_vitis.vm_table_button (button_class, event, label_id, ressource_id, tab_id) VALUES ('add_smallFlexigrid', 'importBusinessObject', 'vmap_113', 'vmap/businessobjects', (SELECT tab_id FROM s_vitis.vm_tab WHERE name = 'vmap_business_object'));
				-- Armand le 17/03/2017: libéllés des coordsys
				UPDATE s_vmap.rt_crs SET name='[EPSG:2154]-RGF93.Lambert-93' WHERE crs_id='EPSG:2154';
				UPDATE s_vmap.rt_crs SET name='[EPSG:3857]-WGS84.Spherical Mercator' WHERE crs_id='EPSG:3857';
				UPDATE s_vmap.rt_crs SET name='[EPSG:4326]-WGS84.LL' WHERE crs_id='EPSG:4326';
				UPDATE s_vitis.vm_table_field SET width='240' WHERE name='crs_name' and ressource_id='vmap/maps';
				-- Armand le 31/03/2017: revoke grant vitis_user vitis_admin
				REVOKE ALL PRIVILEGES ON s_vmap.v_map FROM vitis_admin;
				REVOKE ALL PRIVILEGES ON s_vmap.v_map FROM vitis_user;
				ALTER TABLE s_vmap.v_printreport  OWNER TO u_vitis;
				-- Armand le 31/03/2017
				DELETE FROM s_vitis.vm_table_field WHERE tab_id=97 AND name='last_update_date';
				DELETE FROM s_vitis.vm_table_field WHERE tab_id=97 AND name='last_update_author';
                                -- Frédéric le 03/04/2017 à 10:06
				INSERT INTO s_vitis.vm_string (string, string_id) VALUES ('Champ bo_id de l''onglet vmap_layer', 'vmap_114');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_114', 'fr', 'Objet métier');
				INSERT INTO s_vitis.vm_translation (translation_id, lang, translation) VALUES ('vmap_114', 'en', 'Business object');
				INSERT INTO s_vitis.vm_table_field (name, sortable, resizeable, "index", width, align, label_id, ressource_id, tab_id) VALUES ('bo_id', true, true, 7,  200, 'left', 'vmap_114', 'vmap/layers' ,(SELECT tab_id FROM s_vitis.vm_tab WHERE name='vmap_layer'));
                                -- Frédéric le 07/04/2017 à 11:41
				CREATE OR REPLACE VIEW s_vmap.v_user_printstyle AS SELECT * FROM s_vmap.printstyle where printstyle_id IN (SELECT printstyle_id FROM s_vmap.user_printstyle where user_id = (SELECT user_id FROM s_vitis.user where login = current_user));
				-- Armand le 19/04/2016
				UPDATE s_vmap.service SET url='https://geobretagne.fr/geoserver/audelor/wms' WHERE url='http://geobretagne.fr/geoserver/audelor/wms?service=wms';
				UPDATE s_vmap.service SET url='http://[veremap_serveur]/cgi-bin/wmsmap' WHERE url='http://[veremap_serveur]/cgi-bin/wmsmap?service=wms';
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2017.02.01</version>
			<code>
				<![CDATA[
					-- Sébastien le 05/05/2017
					UPDATE s_vmap.maptheme SET maptheme_id = nextval('s_vmap.maptheme_maptheme_id_seq') WHERE name = 'Cadastre';
					DELETE FROM s_vitis.vm_table_field WHERE "name" = 'crs_list' and ressource_id = 'vmap/layers';
                    -- Frédéric le 08/06/2017 à 10:14
                    DELETE FROM s_vitis.vm_table_field WHERE "name" = 'last_update_date' and ressource_id = 'vmap/businessobjects';
                    DELETE FROM s_vitis.vm_table_field WHERE "name" = 'last_update_author' and ressource_id = 'vmap/businessobjects';
                    DELETE FROM s_vitis.vm_translation WHERE translation_id IN ('vmap_56', 'vmap_57');
                    DELETE FROM s_vitis.vm_string WHERE string_id IN ('vmap_56', 'vmap_57');
                    -- Armand le 22/06/2017 à 16:46
                    UPDATE s_vmap.layer SET bo_id = NULL WHERE bo_id IS NOT NULL AND NOT EXISTS(SELECT business_object_id FROM s_vmap.business_object WHERE business_object_id = bo_id);
                    ALTER TABLE s_vmap.layer ADD CONSTRAINT fk_s_vmap_bo_layer FOREIGN KEY (bo_id) REFERENCES s_vmap.business_object (business_object_id);
				]]>
			</code>
		</query>
		<query>
			<type>update</type>
			<version>2017.03.00</version>
			<code>
				<![CDATA[
					DROP VIEW s_vmap.v_template;
					DROP VIEW s_vmap.v_user_template;
					DROP VIEW s_vmap.v_printreport;
					DROP VIEW s_vmap.v_map_layer;
					DROP VIEW s_vmap.v_layer;
					ALTER TABLE s_vmap.business_object   ALTER COLUMN "table" TYPE character varying(63);
					ALTER TABLE s_vmap.business_object   ALTER COLUMN business_object_id TYPE character varying(100);
					CREATE OR REPLACE VIEW s_vmap.v_layer AS  SELECT layertheme.name AS theme_name,    service.name AS service_name,    service.service_type_id,    service.url AS service_url,    service.key AS service_key,    service.service_type_version,    service.thumbnail AS service_thumbnail,    service.lang AS service_lang,    service.imagery AS service_imagery,    business_object.title AS bo_title,    business_object.id_field AS bo_id_field,    business_object.database AS bo_database,    business_object.schema AS bo_schema,   business_object."table" AS bo_table,    business_object.sql_summary AS bo_sql_summary,    business_object.sql_list AS bo_sql_list,    business_object.sorted_by AS bo_sorted_by,    business_object.geom_column AS bo_geom_column,    business_object.search_field AS bo_search_field,    business_object.result_field AS bo_result_field,  business_object.search_use_strict AS bo_search_use_strict,    layer.layer_id,    layer.layertheme_id,    layer.service_id,    layer.name,    layer.description,    layer.layer_list,    layer.crs_list,    layer.bo_id,    layer.is_dynamic,    layer.is_filtered,    layer.matrix_set,    layer.layer_style,    layer.layer_format,    layer.layer_options,    service.service_type_type,    service.service_options   FROM s_vmap.layer   LEFT JOIN s_vmap.business_object ON layer.bo_id::text = business_object.business_object_id::text   LEFT JOIN s_vmap.layertheme ON layer.layertheme_id = layertheme.layertheme_id   JOIN s_vmap.service ON layer.service_id = service.service_id;
					ALTER TABLE s_vmap.v_layer  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_layer TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_layer TO vitis_admin;
					GRANT ALL ON TABLE s_vmap.v_layer TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_layer TO vitis_user;
					GRANT SELECT ON TABLE s_vmap.v_layer TO vmap_user;
					CREATE OR REPLACE VIEW s_vmap.v_map_layer AS  SELECT v_layer.layer_id,    v_layer.name,    v_layer.theme_name,    map_layer.layer_visible,    map_layer.map_id,    map_layer.layer_index,    map_layer.layer_opacity,    v_layer.layertheme_id,    v_layer.service_id   FROM s_vmap.v_layer,    s_vmap.map_layer  WHERE v_layer.layer_id = map_layer.layer_id;
					ALTER TABLE s_vmap.v_map_layer  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_map_layer TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_map_layer TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_map_layer TO vmap_user;
					GRANT ALL ON TABLE s_vmap.v_map_layer TO vitis_admin;
					GRANT SELECT ON TABLE s_vmap.v_map_layer TO vitis_user;
					CREATE OR REPLACE VIEW s_vmap.v_printreport AS SELECT printreport.printreport_id,    printreport.name,    printreport.rt_format_id,    printreport.rt_orientation_id,    printreport.outputformats_id,    printreport.business_object_id,    printreport.htmldefinition,    printreport.jsonobjects,    printreport.multiobject,    business_object.title AS business_object_title,    business_object.id_field AS business_object_id_field,    business_object.database AS business_object_database,    business_object.schema AS business_object_schema,    business_object."table" AS business_object_table,    business_object.geom_column AS business_object_geom_column   FROM s_vmap.business_object   JOIN s_vmap.printreport ON business_object.business_object_id::text = printreport.business_object_id::text   JOIN s_vmap.rt_orientation ON printreport.rt_orientation_id::text = rt_orientation.rt_orientation_id::text   JOIN s_vmap.rt_format ON printreport.rt_format_id::text = rt_format.rt_format_id::text   JOIN s_vmap.rt_outputformats ON printreport.outputformats_id::text = rt_outputformats.outputformats_id::text;
					ALTER TABLE s_vmap.v_printreport  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_printreport TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_printreport TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_printreport TO vmap_user;
					CREATE OR REPLACE VIEW s_vmap.v_user_template AS  SELECT DISTINCT printtemplate.printtemplate_id,    printtemplate.name,    printtemplate.rt_format_id,    printtemplate.rt_orientation_id,    printtemplate.definition,    printtemplate.outputformats_id,    printtemplate.sql,    printtemplate.ressource_id,    printtemplate.business_object_id,    business_object.title AS business_object,    printtemplate_group.group_id   FROM s_vmap.printtemplate   LEFT JOIN s_vmap.printtemplate_group ON printtemplate.printtemplate_id = printtemplate_group.printtemplate_id   LEFT JOIN s_vmap.business_object ON printtemplate.business_object_id::text = business_object.business_object_id::text;
					ALTER TABLE s_vmap.v_user_template  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_user_template TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_user_template TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_user_template TO vmap_user;
					CREATE OR REPLACE VIEW s_vmap.v_template AS  SELECT printtemplate.printtemplate_id,    printtemplate.name,    printtemplate.rt_format_id,    printtemplate.rt_orientation_id,    printtemplate.definition,    printtemplate.outputformats_id,    printtemplate.sql,    printtemplate.ressource_id,    printtemplate.business_object_id,    business_object.title AS business_object   FROM s_vmap.printtemplate   LEFT JOIN s_vmap.business_object ON printtemplate.business_object_id::text = business_object.business_object_id::text;
					ALTER TABLE s_vmap.v_template  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_template TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_template TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_template TO vmap_user;             
                    -- Frédéric le 25/07/2017 à 14:43
                    UPDATE s_vmap.layer SET bo_id = NULL WHERE bo_id IN(SELECT bo_id FROM s_vmap.layer WHERE bo_id NOT IN (SELECT business_object_id FROM s_vmap.business_object));
                    ALTER TABLE s_vmap.layer DROP CONSTRAINT IF EXISTS fk_layer_business_object;
                    ALTER TABLE s_vmap.layer ADD CONSTRAINT fk_layer_business_object FOREIGN KEY (bo_id) REFERENCES s_vmap.business_object (business_object_id) MATCH SIMPLE ON UPDATE CASCADE ON DELETE SET NULL;
                     -- Armand le 31/07/2017 à 17:13: ajout de la colonne selection_buffer
                    ALTER TABLE s_vmap.business_object ADD COLUMN selection_buffer double precision;
                    CREATE OR REPLACE VIEW s_vmap.v_layer AS SELECT s_vmap.layertheme.name AS theme_name, s_vmap.service.name AS service_name, s_vmap.service.service_type_id, s_vmap.service.url AS service_url, s_vmap.service."key" AS service_key, s_vmap.service.service_type_version, s_vmap.service.thumbnail AS service_thumbnail, s_vmap.service.lang AS service_lang, s_vmap.service.imagery AS service_imagery, s_vmap.business_object.title AS bo_title, s_vmap.business_object.id_field AS bo_id_field, s_vmap.business_object."database" AS bo_database, s_vmap.business_object."schema" AS bo_schema, s_vmap.business_object."table" AS bo_table, s_vmap.business_object.sql_summary AS bo_sql_summary, s_vmap.business_object.sql_list AS bo_sql_list, s_vmap.business_object.sorted_by AS bo_sorted_by, s_vmap.business_object.geom_column AS bo_geom_column, s_vmap.business_object.search_field AS bo_search_field, s_vmap.business_object.result_field AS bo_result_field, s_vmap.business_object.search_use_strict AS bo_search_use_strict, s_vmap.layer.layer_id, s_vmap.layer.layertheme_id, s_vmap.layer.service_id, s_vmap.layer.name, s_vmap.layer.description, s_vmap.layer.layer_list, s_vmap.layer.crs_list, s_vmap.layer.bo_id, s_vmap.layer.is_dynamic, s_vmap.layer.is_filtered, s_vmap.layer.matrix_set, s_vmap.layer.layer_style, s_vmap.layer.layer_format, s_vmap.layer.layer_options, s_vmap.service.service_type_type, s_vmap.service.service_options, s_vmap.business_object.selection_buffer AS bo_selection_buffer FROM s_vmap.layer LEFT JOIN s_vmap.business_object ON s_vmap.layer.bo_id = s_vmap.business_object.business_object_id LEFT JOIN s_vmap.layertheme ON s_vmap.layer.layertheme_id = s_vmap.layertheme.layertheme_id INNER JOIN s_vmap.service ON s_vmap.layer.service_id = s_vmap.service.service_id;
					GRANT ALL ON TABLE s_vmap.v_layer TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_layer TO vmap_user;
					UPDATE s_vmap.business_object SET selection_buffer=5;
					-- Armand le 18/08/2017 à 11h34 Associer plusieurs objets métiers à un calque
					CREATE TABLE s_vmap.layer_businessobject (layer_id int4 NOT NULL, business_object_id varchar(100) NOT NULL, PRIMARY KEY (layer_id, business_object_id));
					ALTER TABLE s_vmap.layer_businessobject ADD CONSTRAINT fk_business_object_id_layer_businessobject FOREIGN KEY (business_object_id) REFERENCES s_vmap.business_object (business_object_id);
					ALTER TABLE s_vmap.layer_businessobject ADD CONSTRAINT fk_layer_id_layer_businessobject FOREIGN KEY (layer_id) REFERENCES s_vmap.layer (layer_id);
					INSERT INTO s_vmap.layer_businessobject (layer_id, business_object_id) SELECT layer_id, bo_id FROM s_vmap.layer WHERE layer.bo_id IS NOT NULL;
					COMMENT ON COLUMN s_vmap.layer.bo_id IS 'DEPRECATED';
					ALTER TABLE s_vmap.layer_businessobject  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.layer_businessobject TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.layer_businessobject TO vmap_user;
					DROP VIEW s_vmap.v_map_layer;
					DROP VIEW s_vmap.v_layer;
					CREATE OR REPLACE VIEW s_vmap.v_layer AS SELECT s_vmap.layer.layer_id, s_vmap.layer.layertheme_id, s_vmap.layer.service_id, s_vmap.layer.name, s_vmap.layer.description, s_vmap.layer.layer_list, s_vmap.layer.crs_list, s_vmap.layer.is_dynamic, s_vmap.layer.is_filtered, s_vmap.layer.matrix_set, s_vmap.layer.layer_style, s_vmap.layer.layer_format, s_vmap.layer.layer_options, s_vmap.layertheme.name AS theme_name, s_vmap.service.name AS service_name, s_vmap.service.service_type_id, s_vmap.service.url AS service_url, s_vmap.service."key" AS service_key, s_vmap.service.service_type_version, s_vmap.service.thumbnail AS service_thumbnail, s_vmap.service.lang AS service_lang, s_vmap.service.imagery AS service_imagery, s_vmap.service.service_type_type, s_vmap.service.service_options, string_agg(layer_businessobject.business_object_id, '|') AS bo_id_list FROM s_vmap.layer LEFT JOIN s_vmap.layer_businessobject ON s_vmap.layer.layer_id = s_vmap.layer_businessobject.layer_id LEFT JOIN s_vmap.business_object ON s_vmap.layer_businessobject.business_object_id = s_vmap.business_object.business_object_id LEFT JOIN s_vmap.layertheme ON s_vmap.layer.layertheme_id = s_vmap.layertheme.layertheme_id INNER JOIN s_vmap.service ON s_vmap.layer.service_id = s_vmap.service.service_id GROUP BY s_vmap.layer.layer_id, s_vmap.layertheme.name, s_vmap.service.name, s_vmap.service.service_type_id, s_vmap.service.url, s_vmap.service."key", s_vmap.service.service_type_version, s_vmap.service.thumbnail, s_vmap.service.lang, s_vmap.service.imagery, s_vmap.service.service_type_type, s_vmap.service.service_options; 
					ALTER TABLE s_vmap.v_layer  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_layer TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_layer TO vmap_user;
					CREATE OR REPLACE VIEW s_vmap.v_map_layer AS  SELECT v_layer.layer_id,    v_layer.name,    v_layer.theme_name,    map_layer.layer_visible,    map_layer.map_id,    map_layer.layer_index,    map_layer.layer_opacity,    v_layer.layertheme_id,    v_layer.service_id   FROM s_vmap.v_layer,    s_vmap.map_layer  WHERE v_layer.layer_id = map_layer.layer_id;
					ALTER TABLE s_vmap.v_map_layer  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_map_layer TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_map_layer TO vmap_user;
					ALTER TABLE s_vmap.layer DROP CONSTRAINT IF EXISTS fk_layer_business_object;
					ALTER TABLE s_vmap.layer DROP CONSTRAINT IF EXISTS fk_s_vmap_bo_layer;
					-- Admand 23/08/2017: utilisation de plusieurs bo pour un seul calque
					UPDATE s_vitis.vm_table_field SET name='bo_id_list' where name='bo_id' and ressource_id='vmap/layers';
					-- Armand 31/08/2017 16h51: Ajout du cadastre light
					ALTER TABLE s_vmap.module ADD COLUMN rolname_list varchar(255);
					UPDATE s_vmap.module SET rolname_list='vmap_cadastre_user|vmap_cadastre_light_user' WHERE module_id = 'cadastre';
					-- Armand 19/09/2017 15:46 Le champ business_object_id de la table s_vmap.printtemplate est trop court 50 au lieu de 100.
					DROP VIEW s_vmap.v_template;
					DROP VIEW s_vmap.v_user_template;
					ALTER TABLE s_vmap.printtemplate ALTER COLUMN business_object_id TYPE character varying(100);
					CREATE OR REPLACE VIEW s_vmap.v_template AS  SELECT printtemplate.printtemplate_id,    printtemplate.name,    printtemplate.rt_format_id,    printtemplate.rt_orientation_id,    printtemplate.definition,    printtemplate.outputformats_id,    printtemplate.sql,    printtemplate.ressource_id,    printtemplate.business_object_id,    business_object.title AS business_object   FROM s_vmap.printtemplate   LEFT JOIN s_vmap.business_object ON printtemplate.business_object_id::text = business_object.business_object_id::text;
					ALTER TABLE s_vmap.v_template  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_template TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_template TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_template TO vmap_user;
					CREATE OR REPLACE VIEW s_vmap.v_user_template AS  SELECT DISTINCT printtemplate.printtemplate_id,    printtemplate.name,    printtemplate.rt_format_id,    printtemplate.rt_orientation_id,    printtemplate.definition,    printtemplate.outputformats_id,    printtemplate.sql,    printtemplate.ressource_id,    printtemplate.business_object_id,    business_object.title AS business_object,    printtemplate_group.group_id   FROM s_vmap.printtemplate   LEFT JOIN s_vmap.printtemplate_group ON printtemplate.printtemplate_id = printtemplate_group.printtemplate_id   LEFT JOIN s_vmap.business_object ON printtemplate.business_object_id::text = business_object.business_object_id::text;
					ALTER TABLE s_vmap.v_user_template  OWNER TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_user_template TO u_vitis;
					GRANT ALL ON TABLE s_vmap.v_user_template TO vmap_admin;
					GRANT SELECT ON TABLE s_vmap.v_user_template TO vmap_user;
				]]>
			</code>
		</query>
	</queriesCollection>
</sqlQueries>